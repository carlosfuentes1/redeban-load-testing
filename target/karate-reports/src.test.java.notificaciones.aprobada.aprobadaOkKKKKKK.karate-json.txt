{"failedCount":19,"prefixedPath":"src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature","packageQualifiedName":"src.test.java.notificaciones.aprobada.aprobadaOkKKKKKK","loopIndex":-1,"relativePath":"src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":88254200,"millis":88.2542,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:21:43.819 karate.env system property was: null \n23:21:45.404 this thread waited 1567 milliseconds for callSingle lock: classpath:helper\/CrearToken.feature\n"},{"result":{"nanos":446100,"millis":0.4461,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":27736600,"millis":27.7366,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":98345900,"millis":98.3459,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":3323700,"millis":3.3237,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":3281000,"millis":3.281,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":9240300,"millis":9.2403,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":403349200,"millis":403.3492,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":2097600,"millis":2.0976,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":862500,"millis":0.8625,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":947200,"millis":0.9472,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":8123900,"millis":8.1239,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":1251200,"millis":1.2512,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":265800,"millis":0.2658,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":527800,"millis":0.5278,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":254100,"millis":0.2541,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":579100,"millis":0.5791,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":3665200,"millis":3.6652,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":703900,"millis":0.7039,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0051\""}},{"result":{"nanos":7020100,"millis":7.0201,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":619500,"millis":0.6195,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":703000,"millis":0.703,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"TRANSFERENCIA AHORRO\""}},{"result":{"nanos":679000,"millis":0.679,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CC\""}},{"result":{"nanos":1166800,"millis":1.1668,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":100100,"millis":0.1001,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10441524200,"millis":10441.5242,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:21:46.083 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2040\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0051\",\"atmId\":\"559432aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2321\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":267138,\"rrn\":\"09333\",\"dateTime\":\"20231102232100\",\"transactionType\":\"TRANSFERENCIA AHORRO\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"CC\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":267138},\"script\":\"[0X0A][0X1C][0X2C][0X3C]267138[0X0A][0X1C][0X2A][0X3A]0051[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]TRANSFERENCIA AHORRO[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 267138[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:21:56.521 response time in milliseconds: 10438\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:21:56 GMT\n1 < x-amzn-RequestId: 1693f14a-7013-4a52-bd2b-e19a5efdfe7f\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKKPHvZIAMERHw=\n1 < X-Amzn-Trace-Id: Root=1-654323da-7184d7777adee82d2193972d\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 9070f631ce8658f68e38f50ffecb555e.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: weK7QUiJl6eQ1RqWzxfLavHnHnvJrtbY10Pd6zKiyorzmOAlLq4kRQ==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":17600,"millis":0.0176,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":14577500,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":14.5775,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:21:56.539 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0051\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"TRANSFERENCIA AHORRO\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CC\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":108,"description":"","durationMillis":11119.6631,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-1","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898903575,"refId":"[1.1:108]","endTime":1698898916539,"exampleData":{"accountType":"CC","notifiFlag":"true","Type":"1","transaction":"TRANSFERENCIA AHORRO","financialCode":"0051","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":0},{"sectionIndex":0,"stepResults":[{"result":{"nanos":87866800,"millis":87.8668,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:21:43.819 karate.env system property was: null \n23:21:45.397 this thread waited 1559 milliseconds for callSingle lock: classpath:helper\/CrearToken.feature\n"},{"result":{"nanos":659700,"millis":0.6597,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":27721100,"millis":27.7211,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":98345800,"millis":98.3458,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":3248200,"millis":3.2482,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":3987800,"millis":3.9878,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":10333200,"millis":10.3332,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":401800900,"millis":401.8009,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":1599700,"millis":1.5997,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":1019200,"millis":1.0192,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":1534900,"millis":1.5349,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":12005800,"millis":12.0058,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":777100,"millis":0.7771,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":204500,"millis":0.2045,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":375700,"millis":0.3757,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":130500,"millis":0.1305,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":743500,"millis":0.7435,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":813500,"millis":0.8135,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":833400,"millis":0.8334,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0013\""}},{"result":{"nanos":733900,"millis":0.7339,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":697600,"millis":0.6976,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":698000,"millis":0.698,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"TRANSFERENCIA CORRIENTE\""}},{"result":{"nanos":841100,"millis":0.8411,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"AH\""}},{"result":{"nanos":3857300,"millis":3.8573,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":124500,"millis":0.1245,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10583467300,"millis":10583.4673,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:21:46.083 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2046\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0013\",\"atmId\":\"757142aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2321\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":647288,\"rrn\":\"09333\",\"dateTime\":\"20231102232100\",\"transactionType\":\"TRANSFERENCIA CORRIENTE\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"AH\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":647288},\"script\":\"[0X0A][0X1C][0X2C][0X3C]647288[0X0A][0X1C][0X2A][0X3A]0013[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]TRANSFERENCIA CORRIENTE[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 647288[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:21:56.662 response time in milliseconds: 10579\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:21:57 GMT\n1 < x-amzn-RequestId: 96c1f0a3-027c-468e-bf40-6397fdc3423f\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKKRFdeoAMEJhg=\n1 < X-Amzn-Trace-Id: Root=1-654323db-4111ce0b78a4660d05d6b9ae\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 7be5aeffc4be446098dbbdded7f32774.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: pSL_ObuenTsxirfPgtMuOB0U4PFo2DiOgjIYeOk3aYO29puP9fAY-g==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":4826800,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":4.8268,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:21:56.670 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0013\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"TRANSFERENCIA CORRIENTE\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"AH\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":116,"description":"","durationMillis":11249.2689,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-2","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898903577,"refId":"[1.2:116]","endTime":1698898916670,"exampleData":{"accountType":"AH","notifiFlag":"true","Type":"1","transaction":"TRANSFERENCIA CORRIENTE","financialCode":"0013","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":1},{"sectionIndex":0,"stepResults":[{"result":{"nanos":87622500,"millis":87.6225,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:21:43.819 karate.env system property was: null \n23:21:45.397 this thread waited 1559 milliseconds for callSingle lock: classpath:helper\/CrearToken.feature\n"},{"result":{"nanos":433600,"millis":0.4336,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":27689700,"millis":27.6897,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":98345800,"millis":98.3458,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":3214600,"millis":3.2146,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":4397700,"millis":4.3977,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":7860500,"millis":7.8605,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":403837400,"millis":403.8374,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":7544000,"millis":7.544,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":2538300,"millis":2.5383,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":1278700,"millis":1.2787,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":559800,"millis":0.5598,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":5409300,"millis":5.4093,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":196200,"millis":0.1962,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":372300,"millis":0.3723,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":136700,"millis":0.1367,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":552400,"millis":0.5524,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":771300,"millis":0.7713,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":710600,"millis":0.7106,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0013\""}},{"result":{"nanos":903900,"millis":0.9039,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":640500,"millis":0.6405,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":788600,"millis":0.7886,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"TRANSFERENCIA OTRA CTA\""}},{"result":{"nanos":830000,"millis":0.83,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CC\""}},{"result":{"nanos":4517300,"millis":4.5173,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":112600,"millis":0.1126,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10583378400,"millis":10583.3784,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:21:46.086 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2044\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0013\",\"atmId\":\"588506aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2321\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":445000,\"rrn\":\"09333\",\"dateTime\":\"20231102232100\",\"transactionType\":\"TRANSFERENCIA OTRA CTA\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"CC\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":445000},\"script\":\"[0X0A][0X1C][0X2C][0X3C]445000[0X0A][0X1C][0X2A][0X3A]0013[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]TRANSFERENCIA OTRA CTA[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 445000[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:21:56.662 response time in milliseconds: 10576\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:21:57 GMT\n1 < x-amzn-RequestId: deb22a4b-0f23-4e64-bb7e-c958f247f380\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKKRFJqIAMEq3A=\n1 < X-Amzn-Trace-Id: Root=1-654323db-755dd1da13eba79f09ebc19d\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 f53a0c29e1f5f8fc5c349fabe8edeb08.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: jX0PogHH3tDFfzojjhmyCiiMDiuU6KkOZ2FtyDriT8Pb65ANFH9ZTQ==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":18300,"millis":0.0183,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":4653100,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":4.6531,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:21:56.662 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0013\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"TRANSFERENCIA OTRA CTA\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CC\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":126,"description":"","durationMillis":11249.3141,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-3","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898903577,"refId":"[1.3:126]","endTime":1698898916662,"exampleData":{"accountType":"CC","notifiFlag":"true","Type":"1","transaction":"TRANSFERENCIA OTRA CTA","financialCode":"0013","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":2},{"sectionIndex":0,"stepResults":[{"result":{"nanos":87507800,"millis":87.5078,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:21:43.819 karate.env system property was: null \n23:21:45.397 this thread waited 1559 milliseconds for callSingle lock: classpath:helper\/CrearToken.feature\n"},{"result":{"nanos":752000,"millis":0.752,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":27778400,"millis":27.7784,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":98345900,"millis":98.3459,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":3802900,"millis":3.8029,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":831600,"millis":0.8316,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":7294300,"millis":7.2943,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":407030800,"millis":407.0308,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":2546500,"millis":2.5465,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":3231700,"millis":3.2317,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":4029600,"millis":4.0296,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":1907500,"millis":1.9075,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":1390100,"millis":1.3901,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":213100,"millis":0.2131,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":465700,"millis":0.4657,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":155200,"millis":0.1552,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":700700,"millis":0.7007,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":3703300,"millis":3.7033,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":701900,"millis":0.7019,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0023\""}},{"result":{"nanos":712100,"millis":0.7121,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":3228800,"millis":3.2288,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":955900,"millis":0.9559,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"RETIRO\""}},{"result":{"nanos":784800,"millis":0.7848,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":1703800,"millis":1.7038,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":139100,"millis":0.1391,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10436093800,"millis":10436.0938,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:21:46.083 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2012\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0023\",\"atmId\":\"919949aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2321\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":435569,\"rrn\":\"09333\",\"dateTime\":\"20231102232100\",\"transactionType\":\"RETIRO\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"00\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":435569},\"script\":\"[0X0A][0X1C][0X2C][0X3C]435569[0X0A][0X1C][0X2A][0X3A]0023[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]RETIRO[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 435569[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:21:56.515 response time in milliseconds: 10432\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:21:56 GMT\n1 < x-amzn-RequestId: d3e9208f-7b62-4bfa-94f8-ef5bb53c538f\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKKPFcVoAMENPg=\n1 < X-Amzn-Trace-Id: Root=1-654323da-4bf4365c62b664523fede782\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 266a90e97e11da9abf4a8ed10543ed6c.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: u5royDrwjCY42ooIvMqC1BoZwwJ145l0-xgvJYEUA4RAL8hMZUy9nw==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":23200,"millis":0.0232,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":22443400,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":22.4434,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:21:56.539 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0023\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"RETIRO\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":137,"description":"","durationMillis":11118.4739,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-4","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898903575,"refId":"[1.4:137]","endTime":1698898916539,"exampleData":{"accountType":"00","notifiFlag":"true","Type":"1","transaction":"RETIRO","financialCode":"0023","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":3},{"sectionIndex":0,"stepResults":[{"result":{"nanos":88740100,"millis":88.7401,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:21:45.397 << lock released, cached callSingle: classpath:helper\/CrearToken.feature\n","callResults":[{"prefixedPath":"classpath:helper\/CrearToken.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-11-01 11:22:27 p.m.","durationMillis":1471.3067,"callArg":{"pathUrl":"\/transactional\/api\/vouchers\/transactions","apiToken":"https:\/\/voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com\/oauth2\/token","url":"https:\/\/apicorr.redebanvd.net","apiKey":"tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g","tokenAuthorization":"Basic NnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGw6MW5uNjVnOXA1bHY5cnZubHYwdTljNm52cnMzM2hramluNWVrNDNyNTJyYmcwaDhxdmhjMQ=="},"failedCount":0,"packageQualifiedName":"helper.CrearToken","relativePath":"helper\/CrearToken.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":966300,"millis":0.9663,"status":"passed"},"step":{"line":4,"prefix":"Given","index":0,"text":"url apiToken"},"stepLog":"23:21:43.819 karate.env system property was: null \n23:21:43.838 >> lock acquired, begin callSingle: classpath:helper\/CrearToken.feature\n"},{"result":{"nanos":3414900,"millis":3.4149,"status":"passed"},"step":{"line":5,"prefix":"And","index":1,"text":"header Content-Type = 'application\/x-www-form-urlencoded'"}},{"result":{"nanos":449500,"millis":0.4495,"status":"passed"},"step":{"line":6,"prefix":"And","index":2,"text":"header Authorization = tokenAuthorization"}},{"result":{"nanos":882600,"millis":0.8826,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request 'grant_type=client_credentials&Scope=consumers%2Ffabrica'"}},{"result":{"nanos":1461220800,"millis":1461.2208,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method post"},"stepLog":"23:21:44.425 request:\n1 > POST https:\/\/voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com\/oauth2\/token\n1 > Content-Type: application\/x-www-form-urlencoded; charset=UTF-8\n1 > Authorization: Basic NnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGw6MW5uNjVnOXA1bHY5cnZubHYwdTljNm52cnMzM2hramluNWVrNDNyNTJyYmcwaDhxdmhjMQ==\n1 > Content-Length: 55\n1 > Host: voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\ngrant_type=client_credentials&Scope=consumers%2Ffabrica\n\n23:21:45.350 response time in milliseconds: 925\n1 < 200\n1 < Date: Thu, 02 Nov 2023 04:21:45 GMT\n1 < Content-Type: application\/json;charset=UTF-8\n1 < Transfer-Encoding: chunked\n1 < Connection: keep-alive\n1 < Content-Security-Policy-Report-Only: script-src https:\/\/d3oia8etllorh5.cloudfront.net https:\/\/voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com; style-src https:\/\/d3oia8etllorh5.cloudfront.net https:\/\/voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com; img-src https:\/\/d3oia8etllorh5.cloudfront.net https:\/\/voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com; report-uri https:\/\/voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com\/cspreport\n1 < x-amz-cognito-request-id: 13fdec21-b6b8-4306-b7a1-9665a4e3295d\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Strict-Transport-Security: max-age=31536000 ; includeSubDomains\n1 < X-Frame-Options: DENY\n1 < Server: Server\n1 < Set-Cookie: XSRF-TOKEN=8d9a1dd9-9af7-4ffd-9626-5546f804eb88; Domain=voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com; Secure\n{\"access_token\":\"eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\",\"expires_in\":1800,\"token_type\":\"Bearer\"}\n\n"},{"result":{"nanos":25600,"millis":0.0256,"status":"passed"},"step":{"line":9,"prefix":"Then","index":5,"text":"status 200"}},{"result":{"nanos":4347000,"millis":4.347,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"def access_token = response.access_token"}}],"executorName":"pool-1-thread-5","line":3,"name":"crear token","description":"","durationMillis":1471.3067,"startTime":1698898903898,"failed":false,"refId":"[1:3]","endTime":1698898905397,"exampleIndex":-1}],"name":"Ejecutar Endpoint para crear el token que se usara para crear las transacciones","passedCount":1}]},{"result":{"nanos":1407200,"millis":1.4072,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":26954100,"millis":26.9541,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":98346000,"millis":98.346,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":3397400,"millis":3.3974,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":1139200,"millis":1.1392,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":7339800,"millis":7.3398,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":406998300,"millis":406.9983,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":1814800,"millis":1.8148,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":1010600,"millis":1.0106,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":1025700,"millis":1.0257,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":10849000,"millis":10.849,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":827100,"millis":0.8271,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":126800,"millis":0.1268,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":366700,"millis":0.3667,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":130700,"millis":0.1307,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":470300,"millis":0.4703,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":3121300,"millis":3.1213,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":631000,"millis":0.631,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0007\""}},{"result":{"nanos":2867500,"millis":2.8675,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":860900,"millis":0.8609,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":849400,"millis":0.8494,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"AHORRO A LA MANO\""}},{"result":{"nanos":661800,"millis":0.6618,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CR\""}},{"result":{"nanos":1746000,"millis":1.746,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":114700,"millis":0.1147,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10570102200,"millis":10570.1022,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:21:46.088 request:\n2 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n2 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n2 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 2032\n2 > Host: apicorr.redebanvd.net\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n2 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0007\",\"atmId\":\"766125aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2321\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":146303,\"rrn\":\"09333\",\"dateTime\":\"20231102232100\",\"transactionType\":\"AHORRO A LA MANO\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"CR\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":146303},\"script\":\"[0X0A][0X1C][0X2C][0X3C]146303[0X0A][0X1C][0X2A][0X3A]0007[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]AHORRO A LA MANO[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 146303[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:21:56.642 response time in milliseconds: 10554\n2 < 200\n2 < Content-Type: application\/json\n2 < Content-Length: 132\n2 < Connection: keep-alive\n2 < Date: Thu, 02 Nov 2023 04:21:57 GMT\n2 < x-amzn-RequestId: 9ea83746-bdf0-4c79-a858-76c596fa8b7d\n2 < Access-Control-Allow-Origin: *\n2 < x-amz-apigw-id: NwKKRF1DIAMEb8w=\n2 < X-Amzn-Trace-Id: Root=1-654323db-4888fd8f5b78fe573351b2c4\n2 < X-Cache: Miss from cloudfront\n2 < Via: 1.1 30abd569e68deed3fed9c3a0916acc96.cloudfront.net (CloudFront)\n2 < X-Amz-Cf-Pop: BOG50-P1\n2 < X-Amz-Cf-Id: ukkVox-tktyxMBzjtmWFpPDw57ORV-qqeBtByqQV2vfHc_TqI0J_ZQ==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":16400,"millis":0.0164,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":3308000,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":3.308,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:21:56.642 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0007\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"AHORRO A LA MANO\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CR\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":145,"description":"","durationMillis":11235.223,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-5","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898903575,"refId":"[1.5:145]","endTime":1698898916642,"exampleData":{"accountType":"CR","notifiFlag":"true","Type":"1","transaction":"AHORRO A LA MANO","financialCode":"0007","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":4},{"sectionIndex":0,"stepResults":[{"result":{"nanos":7126200,"millis":7.1262,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:21:56.552 karate.env system property was: null \n"},{"result":{"nanos":196000,"millis":0.196,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":1300100,"millis":1.3001,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":1650200,"millis":1.6502,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":773300,"millis":0.7733,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":640800,"millis":0.6408,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":2495300,"millis":2.4953,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":14100100,"millis":14.1001,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":611700,"millis":0.6117,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":588200,"millis":0.5882,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":558100,"millis":0.5581,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":236800,"millis":0.2368,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":383500,"millis":0.3835,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":111900,"millis":0.1119,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":124400,"millis":0.1244,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":99200,"millis":0.0992,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":212800,"millis":0.2128,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":240500,"millis":0.2405,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":696200,"millis":0.6962,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0007\""}},{"result":{"nanos":231100,"millis":0.2311,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":223700,"millis":0.2237,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":923600,"millis":0.9236,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"RETIRO NEQUI\""}},{"result":{"nanos":270900,"millis":0.2709,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":373100,"millis":0.3731,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":106400,"millis":0.1064,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10373386300,"millis":10373.3863,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:21:56.582 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2024\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0007\",\"atmId\":\"797562aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2321\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":351115,\"rrn\":\"09333\",\"dateTime\":\"20231102232100\",\"transactionType\":\"RETIRO NEQUI\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"00\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":351115},\"script\":\"[0X0A][0X1C][0X2C][0X3C]351115[0X0A][0X1C][0X2A][0X3A]0007[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]RETIRO NEQUI[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 351115[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:06.962 response time in milliseconds: 10380\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:07 GMT\n1 < x-amzn-RequestId: 9907634d-c07f-4efe-9f56-b08e247df56f\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKL3FTaIAMElRA=\n1 < X-Amzn-Trace-Id: Root=1-654323e5-1fd32a5b6274c2455cc731e9\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 7808e8f539edaee36c1b66ee6e4969d4.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: eGGkUn7BEpgeUQ3MWVdEgZ7jESyoJPg9kwbh7Q7h5zXSN8VZPQI9Hg==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":13400,"millis":0.0134,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":2385100,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":2.3851,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:06.965 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0007\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"RETIRO NEQUI\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":155,"description":"","durationMillis":10410.0589,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-4","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898916546,"refId":"[1.6:155]","endTime":1698898926965,"exampleData":{"accountType":"00","notifiFlag":"true","Type":"1","transaction":"RETIRO NEQUI","financialCode":"0007","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":5},{"sectionIndex":0,"stepResults":[{"result":{"nanos":6943400,"millis":6.9434,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:21:56.552 karate.env system property was: null \n"},{"result":{"nanos":240200,"millis":0.2402,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":1126600,"millis":1.1266,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":1847800,"millis":1.8478,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":767800,"millis":0.7678,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":591100,"millis":0.5911,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":2625100,"millis":2.6251,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":10735700,"millis":10.7357,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":913700,"millis":0.9137,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":696000,"millis":0.696,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":919100,"millis":0.9191,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":283000,"millis":0.283,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":333700,"millis":0.3337,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":116700,"millis":0.1167,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":117800,"millis":0.1178,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":104400,"millis":0.1044,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":244000,"millis":0.244,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":292700,"millis":0.2927,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":1048000,"millis":1.048,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0013\""}},{"result":{"nanos":293800,"millis":0.2938,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":268800,"millis":0.2688,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":887100,"millis":0.8871,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"RETIRO PAGOS\""}},{"result":{"nanos":231700,"millis":0.2317,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CC\""}},{"result":{"nanos":404000,"millis":0.404,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":113800,"millis":0.1138,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10322963100,"millis":10322.9631,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:21:56.582 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2023\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0013\",\"atmId\":\"45674aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2321\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":239393,\"rrn\":\"09333\",\"dateTime\":\"20231102232100\",\"transactionType\":\"RETIRO PAGOS\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"CC\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":239393},\"script\":\"[0X0A][0X1C][0X2C][0X3C]239393[0X0A][0X1C][0X2A][0X3A]0013[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]RETIRO PAGOS[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 239393[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:06.910 response time in milliseconds: 10327\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:07 GMT\n1 < x-amzn-RequestId: ffb9fae7-affe-4985-b56c-b9c30dc13dc2\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKL3HADoAMERpg=\n1 < X-Amzn-Trace-Id: Root=1-654323e5-754d52b46ad03f4d382095ca\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 2d421cb55f565ff4c38cbaaf0ba2f1a2.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: SVH9Z5ISVCyQ8LZgQGh86WRSLpqfaOaLgmEVOeIAnf3OrkfHsK8Idw==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":12800,"millis":0.0128,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":1466900,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":1.4669,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:06.912 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0013\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"RETIRO PAGOS\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CC\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":166,"description":"","durationMillis":10356.5888,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-1","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898916546,"refId":"[1.7:166]","endTime":1698898926912,"exampleData":{"accountType":"CC","notifiFlag":"true","Type":"1","transaction":"RETIRO PAGOS","financialCode":"0013","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":6},{"sectionIndex":0,"stepResults":[{"result":{"nanos":9446400,"millis":9.4464,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:21:56.662 karate.env system property was: null \n"},{"result":{"nanos":271600,"millis":0.2716,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":881900,"millis":0.8819,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":1426000,"millis":1.426,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":1154000,"millis":1.154,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":451500,"millis":0.4515,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":1505100,"millis":1.5051,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":10683500,"millis":10.6835,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":863800,"millis":0.8638,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":626600,"millis":0.6266,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":489200,"millis":0.4892,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":204600,"millis":0.2046,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":467100,"millis":0.4671,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":230400,"millis":0.2304,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":130800,"millis":0.1308,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":102700,"millis":0.1027,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":201600,"millis":0.2016,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":310500,"millis":0.3105,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":845800,"millis":0.8458,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0023\""}},{"result":{"nanos":288500,"millis":0.2885,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":228900,"millis":0.2289,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":617500,"millis":0.6175,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"DEPOSITO AHORROS\""}},{"result":{"nanos":668900,"millis":0.6689,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":368100,"millis":0.3681,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":93700,"millis":0.0937,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10216515200,"millis":10216.5152,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:21:56.705 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2032\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0023\",\"atmId\":\"166215aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2321\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":759475,\"rrn\":\"09333\",\"dateTime\":\"20231102232100\",\"transactionType\":\"DEPOSITO AHORROS\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"00\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":759475},\"script\":\"[0X0A][0X1C][0X2C][0X3C]759475[0X0A][0X1C][0X2A][0X3A]0023[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]DEPOSITO AHORROS[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 759475[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:06.921 response time in milliseconds: 10216\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:07 GMT\n1 < x-amzn-RequestId: 6b023913-2185-4a91-9963-a098b25b92fc\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKL3GVgIAMENMg=\n1 < X-Amzn-Trace-Id: Root=1-654323e5-7d72613d6481cdf523a33553\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 266a90e97e11da9abf4a8ed10543ed6c.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: YYpNLTuvNhoHvgYZsJH8bdzcguQNIfDpRbX1sKruBpYRI0yoDhUKTA==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":10900,"millis":0.0109,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":1574700,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":1.5747,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:06.923 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0023\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"DEPOSITO AHORROS\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":177,"description":"","durationMillis":10250.6595,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-5","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898916662,"refId":"[1.8:177]","endTime":1698898926924,"exampleData":{"accountType":"00","notifiFlag":"true","Type":"1","transaction":"DEPOSITO AHORROS","financialCode":"0023","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":7},{"sectionIndex":0,"stepResults":[{"result":{"nanos":12204900,"millis":12.2049,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:21:56.680 karate.env system property was: null \n"},{"result":{"nanos":240200,"millis":0.2402,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":1153700,"millis":1.1537,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":2158400,"millis":2.1584,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":968700,"millis":0.9687,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":2798600,"millis":2.7986,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":4182200,"millis":4.1822,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":8201200,"millis":8.2012,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":8354000,"millis":8.354,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":2144700,"millis":2.1447,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":953500,"millis":0.9535,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":327900,"millis":0.3279,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":363900,"millis":0.3639,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":13624700,"millis":13.6247,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":620900,"millis":0.6209,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":171100,"millis":0.1711,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":1324000,"millis":1.324,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":12023300,"millis":12.0233,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":16117100,"millis":16.1171,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0023\""}},{"result":{"nanos":927500,"millis":0.9275,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":1179000,"millis":1.179,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":3067600,"millis":3.0676,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"DEPOSITO CORRIENTE\""}},{"result":{"nanos":3304800,"millis":3.3048,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"AH\""}},{"result":{"nanos":608400,"millis":0.6084,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":174700,"millis":0.1747,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10358198400,"millis":10358.1984,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:21:56.804 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2036\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0023\",\"atmId\":\"860461aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2321\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":243460,\"rrn\":\"09333\",\"dateTime\":\"20231102232100\",\"transactionType\":\"DEPOSITO CORRIENTE\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"AH\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":243460},\"script\":\"[0X0A][0X1C][0X2C][0X3C]243460[0X0A][0X1C][0X2A][0X3A]0023[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]DEPOSITO CORRIENTE[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 243460[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:07.145 response time in milliseconds: 10341\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:07 GMT\n1 < x-amzn-RequestId: 5ca0c101-6021-43de-9aa2-6f04951a4aba\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKL5ERoIAMEoRQ=\n1 < X-Amzn-Trace-Id: Root=1-654323e5-3b89103631fce8ac00d9bf91\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 069671f47f4c7a651af36ea1cec65f74.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: 32GiqdndstsVNi0zRvXKP30HdPyGwvo61GWRWrwiqbsIeuTwTuPeAw==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":14000,"millis":0.014,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":2236100,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":2.2361,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:07.148 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0023\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"DEPOSITO CORRIENTE\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"AH\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":187,"description":"","durationMillis":10457.6435,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-3","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898916680,"refId":"[1.9:187]","endTime":1698898927148,"exampleData":{"accountType":"AH","notifiFlag":"true","Type":"1","transaction":"DEPOSITO CORRIENTE","financialCode":"0023","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":8},{"sectionIndex":0,"stepResults":[{"result":{"nanos":21891200,"millis":21.8912,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:21:56.680 karate.env system property was: null \n"},{"result":{"nanos":5800100,"millis":5.8001,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":1028000,"millis":1.028,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":1363300,"millis":1.3633,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":572200,"millis":0.5722,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":471900,"millis":0.4719,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":1632800,"millis":1.6328,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":51902400,"millis":51.9024,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":1445200,"millis":1.4452,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":25948200,"millis":25.9482,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":6214200,"millis":6.2142,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":689800,"millis":0.6898,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":3350300,"millis":3.3503,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":396100,"millis":0.3961,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":2141100,"millis":2.1411,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":145500,"millis":0.1455,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":354500,"millis":0.3545,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":391200,"millis":0.3912,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":1568600,"millis":1.5686,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0051\""}},{"result":{"nanos":2629700,"millis":2.6297,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":2313300,"millis":2.3133,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":2816100,"millis":2.8161,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"RECARGA NEQUI\""}},{"result":{"nanos":2800100,"millis":2.8001,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CR\""}},{"result":{"nanos":3103100,"millis":3.1031,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":368900,"millis":0.3689,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10338731500,"millis":10338.7315,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:21:56.832 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2026\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0051\",\"atmId\":\"158409aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2321\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":515546,\"rrn\":\"09333\",\"dateTime\":\"20231102232100\",\"transactionType\":\"RECARGA NEQUI\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"CR\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":515546},\"script\":\"[0X0A][0X1C][0X2C][0X3C]515546[0X0A][0X1C][0X2A][0X3A]0051[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]RECARGA NEQUI[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 515546[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:07.166 response time in milliseconds: 10334\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:07 GMT\n1 < x-amzn-RequestId: 26cb63f6-63a4-4ad3-9525-d364ec161867\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKL6EQooAMEYiw=\n1 < X-Amzn-Trace-Id: Root=1-654323e5-4d298e19357b6d126813ae23\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 b0769aa3a5fd944d4e8b53fc0502c60a.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: Xx275WWSBPCdgFHQGYPL1RSCszhKqck5SqmosMbL3if2PCBynsX5dg==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":11800,"millis":0.0118,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":1908200,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":1.9082,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:07.169 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0051\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"RECARGA NEQUI\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CR\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":198,"description":"","durationMillis":10481.9893,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-2","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898916678,"refId":"[1.10:198]","endTime":1698898927169,"exampleData":{"accountType":"CR","notifiFlag":"true","Type":"1","transaction":"RECARGA NEQUI","financialCode":"0051","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":9},{"sectionIndex":0,"stepResults":[{"result":{"nanos":2143400,"millis":2.1434,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:22:06.916 karate.env system property was: null \n"},{"result":{"nanos":184200,"millis":0.1842,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":1081200,"millis":1.0812,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":3281200,"millis":3.2812,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":925100,"millis":0.9251,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":337600,"millis":0.3376,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":1093500,"millis":1.0935,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":5620900,"millis":5.6209,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":554300,"millis":0.5543,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":475300,"millis":0.4753,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":417600,"millis":0.4176,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":153200,"millis":0.1532,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":270400,"millis":0.2704,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":65400,"millis":0.0654,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":125900,"millis":0.1259,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":71600,"millis":0.0716,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":164900,"millis":0.1649,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":230800,"millis":0.2308,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":176000,"millis":0.176,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0051\""}},{"result":{"nanos":198400,"millis":0.1984,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":195200,"millis":0.1952,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":1128400,"millis":1.1284,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"PAGO FACTURA MANUAL\""}},{"result":{"nanos":832600,"millis":0.8326,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":336900,"millis":0.3369,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":99800,"millis":0.0998,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10179884100,"millis":10179.8841,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:22:06.943 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2038\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0051\",\"atmId\":\"432631aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2322\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":666618,\"rrn\":\"09333\",\"dateTime\":\"20231102232200\",\"transactionType\":\"PAGO FACTURA MANUAL\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"00\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":666618},\"script\":\"[0X0A][0X1C][0X2C][0X3C]666618[0X0A][0X1C][0X2A][0X3A]0051[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]PAGO FACTURA MANUAL[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 666618[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:17.118 response time in milliseconds: 10175\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:17 GMT\n1 < x-amzn-RequestId: 2e265262-c021-4666-88ca-21eb57d6f967\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKNdH5IoAMEvfA=\n1 < X-Amzn-Trace-Id: Root=1-654323ef-220c90c53a292e113d68937c\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 6e1f0172b684caca2f66247f5ad9eea0.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: HAbglXMdbkqNt4aK6INMtVntaAt0xFCeY5ohRrI9834kZ3Nzu4uIhg==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":23500,"millis":0.0235,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":2598100,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":2.5981,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:17.122 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0051\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"PAGO FACTURA MANUAL\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":208,"description":"","durationMillis":10202.6695,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-1","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898926916,"refId":"[1.11:208]","endTime":1698898937122,"exampleData":{"accountType":"00","notifiFlag":"true","Type":"1","transaction":"PAGO FACTURA MANUAL","financialCode":"0051","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":10},{"sectionIndex":0,"stepResults":[{"result":{"nanos":2218200,"millis":2.2182,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:22:06.929 karate.env system property was: null \n"},{"result":{"nanos":255500,"millis":0.2555,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":301900,"millis":0.3019,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":776200,"millis":0.7762,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":319600,"millis":0.3196,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":365500,"millis":0.3655,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":981100,"millis":0.9811,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":8345700,"millis":8.3457,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":826400,"millis":0.8264,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":519000,"millis":0.519,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":408300,"millis":0.4083,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":216000,"millis":0.216,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":286200,"millis":0.2862,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":75100,"millis":0.0751,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":125400,"millis":0.1254,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":70900,"millis":0.0709,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":205100,"millis":0.2051,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":236200,"millis":0.2362,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":962400,"millis":0.9624,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0052\""}},{"result":{"nanos":228000,"millis":0.228,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":192300,"millis":0.1923,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":808100,"millis":0.8081,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"PAGO FACT. CD BARRAS\""}},{"result":{"nanos":681300,"millis":0.6813,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CC\""}},{"result":{"nanos":275900,"millis":0.2759,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":75200,"millis":0.0752,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10209279400,"millis":10209.2794,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:22:06.953 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2044\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0052\",\"atmId\":\"138588aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2322\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":711654,\"rrn\":\"09333\",\"dateTime\":\"20231102232200\",\"transactionType\":\"PAGO FACT. CD BARRAS\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"CC\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":711654},\"script\":\"[0X0A][0X1C][0X2C][0X3C]711654[0X0A][0X1C][0X2A][0X3A]0052[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]PAGO FACT. CD BARRAS[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 711654[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:17.160 response time in milliseconds: 10207\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:17 GMT\n1 < x-amzn-RequestId: 7da47dc7-ef2c-461f-8e5c-07d7a11d76be\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKNeE4-IAMED_w=\n1 < X-Amzn-Trace-Id: Root=1-654323ef-0e0ad2aa634e407c4d0ab160\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 903a85d64aaae705535a5b297b3346a8.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: Nbm45hBI_5VMUVA5diw8xJ7GHrACHklLU5UnPgr3NebL_euJ7VLo1Q==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":13300,"millis":0.0133,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":2102100,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":2.1021,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:17.163 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0052\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"PAGO FACT. CD BARRAS\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CC\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":219,"description":"","durationMillis":10231.1503,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-5","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898926929,"refId":"[1.12:219]","endTime":1698898937163,"exampleData":{"accountType":"CC","notifiFlag":"true","Type":"1","transaction":"PAGO FACT. CD BARRAS","financialCode":"0052","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":11},{"sectionIndex":0,"stepResults":[{"result":{"nanos":4172300,"millis":4.1723,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:22:06.977 karate.env system property was: null \n"},{"result":{"nanos":240900,"millis":0.2409,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":997300,"millis":0.9973,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":1480800,"millis":1.4808,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":577500,"millis":0.5775,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":506700,"millis":0.5067,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":4322300,"millis":4.3223,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":6288300,"millis":6.2883,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":1108000,"millis":1.108,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":1112400,"millis":1.1124,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":912600,"millis":0.9126,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":201200,"millis":0.2012,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":828500,"millis":0.8285,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":81500,"millis":0.0815,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":428000,"millis":0.428,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":113000,"millis":0.113,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":6116400,"millis":6.1164,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":2454800,"millis":2.4548,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":2525200,"millis":2.5252,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0052\""}},{"result":{"nanos":2431800,"millis":2.4318,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":1483800,"millis":1.4838,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":867200,"millis":0.8672,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"PAGO FACT. TARJ EMPRES\""}},{"result":{"nanos":770000,"millis":0.77,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CR\""}},{"result":{"nanos":10317200,"millis":10.3172,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":157200,"millis":0.1572,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10307142800,"millis":10307.1428,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:22:07.034 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2043\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0052\",\"atmId\":\"93728aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2322\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":744633,\"rrn\":\"09333\",\"dateTime\":\"20231102232200\",\"transactionType\":\"PAGO FACT. TARJ EMPRES\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"CR\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":744633},\"script\":\"[0X0A][0X1C][0X2C][0X3C]744633[0X0A][0X1C][0X2A][0X3A]0052[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]PAGO FACT. TARJ EMPRES[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 744633[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:17.338 response time in milliseconds: 10303\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:17 GMT\n1 < x-amzn-RequestId: e810ae16-3411-4e57-8f89-e1a6619cd36b\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKNfGyWoAMEsYQ=\n1 < X-Amzn-Trace-Id: Root=1-654323ef-1ae43a0429d2dcef5f8aa2f5\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 50f6b9d57652524b34036a87c57cb992.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: uCCkmN8egcTnUdy2OU7LeFFeeFN76rB8f70xdGqcw3GS9XKtw4AIQw==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":102100,"millis":0.1021,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":2790800,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":2.7908,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:17.343 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0052\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"PAGO FACT. TARJ EMPRES\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CR\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":229,"description":"","durationMillis":10360.5306,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-4","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898926969,"refId":"[1.13:229]","endTime":1698898937343,"exampleData":{"accountType":"CR","notifiFlag":"true","Type":"1","transaction":"PAGO FACT. TARJ EMPRES","financialCode":"0052","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":12},{"sectionIndex":0,"stepResults":[{"result":{"nanos":4265900,"millis":4.2659,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:22:07.160 karate.env system property was: null \n"},{"result":{"nanos":206400,"millis":0.2064,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":1058300,"millis":1.0583,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":9403700,"millis":9.4037,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":915200,"millis":0.9152,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":371600,"millis":0.3716,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":3535900,"millis":3.5359,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":32714600,"millis":32.7146,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":3784800,"millis":3.7848,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":9510600,"millis":9.5106,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":2938300,"millis":2.9383,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":259300,"millis":0.2593,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":1294000,"millis":1.294,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":207000,"millis":0.207,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":938300,"millis":0.9383,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":615700,"millis":0.6157,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":654100,"millis":0.6541,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":1042000,"millis":1.042,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":3820900,"millis":3.8209,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0007\""}},{"result":{"nanos":3231200,"millis":3.2312,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":1325900,"millis":1.3259,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":730700,"millis":0.7307,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"PAGO TARJETA DE CRDITO\""}},{"result":{"nanos":4476500,"millis":4.4765,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":3542200,"millis":3.5422,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":114700,"millis":0.1147,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10202076400,"millis":10202.0764,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:22:07.261 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2048\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0007\",\"atmId\":\"614000aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2322\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":291065,\"rrn\":\"09333\",\"dateTime\":\"20231102232200\",\"transactionType\":\"PAGO TARJETA DE CRDITO\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"00\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":291065},\"script\":\"[0X0A][0X1C][0X2C][0X3C]291065[0X0A][0X1C][0X2A][0X3A]0007[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]PAGO TARJETA DE CRDITO[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 291065[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:17.457 response time in milliseconds: 10196\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:17 GMT\n1 < x-amzn-RequestId: 18e6c0e6-5d71-4c43-a586-8e80bf9c1d22\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKNhHqzoAMEOeA=\n1 < X-Amzn-Trace-Id: Root=1-654323ef-098822da2ebda9680f38a079\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 afa872536bf18addc6b9bc49f0000210.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: kE0a9ESZ2x75ghK1yD3rwK3dhi3qs2kV1s8kSRectHP1BdI7WsYNSA==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":14300,"millis":0.0143,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":1032300,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":1.0323,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:17.459 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0007\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"PAGO TARJETA DE CRDITO\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":235,"description":"","durationMillis":10294.0808,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-3","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898927152,"refId":"[1.14:235]","endTime":1698898937459,"exampleData":{"accountType":"00","notifiFlag":"true","Type":"1","transaction":"PAGO TARJETA DE CRDITO","financialCode":"0007","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":13},{"sectionIndex":0,"stepResults":[{"result":{"nanos":25834000,"millis":25.834,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:22:07.185 karate.env system property was: null \n"},{"result":{"nanos":355400,"millis":0.3554,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":1116500,"millis":1.1165,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":2107300,"millis":2.1073,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":1414500,"millis":1.4145,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":8646400,"millis":8.6464,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":3792100,"millis":3.7921,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":18717800,"millis":18.7178,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":1079800,"millis":1.0798,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":843300,"millis":0.8433,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":735800,"millis":0.7358,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":161600,"millis":0.1616,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":684700,"millis":0.6847,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":1481100,"millis":1.4811,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":743500,"millis":0.7435,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":197600,"millis":0.1976,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":1162100,"millis":1.1621,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":2510300,"millis":2.5103,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":707800,"millis":0.7078,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0002\""}},{"result":{"nanos":2225600,"millis":2.2256,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":1097000,"millis":1.097,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":1487900,"millis":1.4879,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"PAGO CARTERA\""}},{"result":{"nanos":1909200,"millis":1.9092,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":2393000,"millis":2.393,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":129500,"millis":0.1295,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10313645000,"millis":10313.645,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:22:07.280 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2024\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0002\",\"atmId\":\"706460aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2322\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":241573,\"rrn\":\"09333\",\"dateTime\":\"20231102232200\",\"transactionType\":\"PAGO CARTERA\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"00\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":241573},\"script\":\"[0X0A][0X1C][0X2C][0X3C]241573[0X0A][0X1C][0X2A][0X3A]0002[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]PAGO CARTERA[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 241573[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:17.583 response time in milliseconds: 10303\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:17 GMT\n1 < x-amzn-RequestId: 405cc9c7-a2cb-4378-b260-c18a64f964b2\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKNiFKdoAMEb0Q=\n1 < X-Amzn-Trace-Id: Root=1-654323ef-1609b0e6568a584020260019\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 5556637e65d0995f53bff72f94be18a6.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: NCFIqwZxzRkW3Gn_Yv67RXUBfRtYIFg-J60GHLMUtyzD5jzvh4M3lg==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":380500,"millis":0.3805,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":1074200,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":1.0742,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:17.585 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0002\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"PAGO CARTERA\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":244,"description":"","durationMillis":10396.6335,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-2","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898927180,"refId":"[1.15:244]","endTime":1698898937585,"exampleData":{"accountType":"00","notifiFlag":"true","Type":"1","transaction":"PAGO CARTERA","financialCode":"0002","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":14},{"sectionIndex":0,"stepResults":[{"result":{"nanos":3452000,"millis":3.452,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:22:17.129 karate.env system property was: null \n"},{"result":{"nanos":261000,"millis":0.261,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":911500,"millis":0.9115,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":1379600,"millis":1.3796,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":642900,"millis":0.6429,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":405700,"millis":0.4057,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":3871900,"millis":3.8719,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":5305900,"millis":5.3059,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":877200,"millis":0.8772,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":569300,"millis":0.5693,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":591000,"millis":0.591,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":178700,"millis":0.1787,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":736100,"millis":0.7361,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":70100,"millis":0.0701,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":783400,"millis":0.7834,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":61600,"millis":0.0616,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":399100,"millis":0.3991,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":518000,"millis":0.518,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":467800,"millis":0.4678,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0007\""}},{"result":{"nanos":403000,"millis":0.403,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":312600,"millis":0.3126,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":420100,"millis":0.4201,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"CONSULTA DE SALDO\""}},{"result":{"nanos":411700,"millis":0.4117,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CC\""}},{"result":{"nanos":1206800,"millis":1.2068,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":579600,"millis":0.5796,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10192308100,"millis":10192.3081,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:22:17.159 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2034\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0007\",\"atmId\":\"323804aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2322\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":363309,\"rrn\":\"09333\",\"dateTime\":\"20231102232200\",\"transactionType\":\"CONSULTA DE SALDO\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"CC\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":363309},\"script\":\"[0X0A][0X1C][0X2C][0X3C]363309[0X0A][0X1C][0X2A][0X3A]0007[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]CONSULTA DE SALDO[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 363309[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:27.336 response time in milliseconds: 10177\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:27 GMT\n1 < x-amzn-RequestId: 0eaea80f-7f31-4e32-a095-43576e98a836\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKPDFJsIAMEHLA=\n1 < X-Amzn-Trace-Id: Root=1-654323f9-5e74cae55c8e84c87ce46da7\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 22f93d92a360e7503437b796bfa15524.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: BEhvSRCfvZO0Vp5c2R0OlU4PTki389Bo2_8mdAj4pRCQ8woX_d_2Rw==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":30000,"millis":0.03,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":1326300,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":1.3263,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:27.350 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0007\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"CONSULTA DE SALDO\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CC\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":255,"description":"","durationMillis":10218.481,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-1","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898937127,"refId":"[1.16:255]","endTime":1698898947350,"exampleData":{"accountType":"CC","notifiFlag":"true","Type":"1","transaction":"CONSULTA DE SALDO","financialCode":"0007","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":15},{"sectionIndex":0,"stepResults":[{"result":{"nanos":4896300,"millis":4.8963,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:22:17.169 karate.env system property was: null \n"},{"result":{"nanos":320600,"millis":0.3206,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":976200,"millis":0.9762,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":1156800,"millis":1.1568,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":573700,"millis":0.5737,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":316200,"millis":0.3162,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":1414900,"millis":1.4149,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":8051200,"millis":8.0512,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":2436600,"millis":2.4366,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":595300,"millis":0.5953,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":566600,"millis":0.5666,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":172900,"millis":0.1729,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":808300,"millis":0.8083,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":64600,"millis":0.0646,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":336600,"millis":0.3366,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":65200,"millis":0.0652,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":360600,"millis":0.3606,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":628500,"millis":0.6285,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":491500,"millis":0.4915,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0903\""}},{"result":{"nanos":451900,"millis":0.4519,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":400600,"millis":0.4006,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":433900,"millis":0.4339,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"CONSULTAR CUPO\""}},{"result":{"nanos":476400,"millis":0.4764,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":756500,"millis":0.7565,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":87900,"millis":0.0879,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10301282000,"millis":10301.282,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:22:17.200 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2028\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0903\",\"atmId\":\"209188aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2322\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":905851,\"rrn\":\"09333\",\"dateTime\":\"20231102232200\",\"transactionType\":\"CONSULTAR CUPO\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"00\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":905851},\"script\":\"[0X0A][0X1C][0X2C][0X3C]905851[0X0A][0X1C][0X2A][0X3A]0903[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]CONSULTAR CUPO[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 905851[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:27.490 response time in milliseconds: 10290\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:27 GMT\n1 < x-amzn-RequestId: 3ca7611e-5dbd-4494-8ace-db023c50e7f1\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKPFGC2oAMEOLw=\n1 < X-Amzn-Trace-Id: Root=1-654323f9-2d12ead855b80dfb5e437576\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 9070f631ce8658f68e38f50ffecb555e.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: gj_5jQEnT2wseW8-d3Vs9Mm4KHlR4Ok_TdR0RL27TQXmz30jel5InQ==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":12700,"millis":0.0127,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":1205100,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":1.2051,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:27.502 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0903\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"CONSULTAR CUPO\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":270,"description":"","durationMillis":10329.3396,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-5","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898937166,"refId":"[1.17:270]","endTime":1698898947502,"exampleData":{"accountType":"00","notifiFlag":"true","Type":"1","transaction":"CONSULTAR CUPO","financialCode":"0903","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":16},{"sectionIndex":0,"stepResults":[{"result":{"nanos":2313000,"millis":2.313,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:22:17.349 karate.env system property was: null \n"},{"result":{"nanos":409500,"millis":0.4095,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":1114900,"millis":1.1149,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":2019900,"millis":2.0199,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":1987500,"millis":1.9875,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":346400,"millis":0.3464,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":1644800,"millis":1.6448,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":8691000,"millis":8.691,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":1442100,"millis":1.4421,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":1597000,"millis":1.597,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":19062700,"millis":19.0627,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":162200,"millis":0.1622,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":821500,"millis":0.8215,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":57500,"millis":0.0575,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":276600,"millis":0.2766,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":75800,"millis":0.0758,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":277900,"millis":0.2779,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":501900,"millis":0.5019,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":409600,"millis":0.4096,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"6666\""}},{"result":{"nanos":438200,"millis":0.4382,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":365200,"millis":0.3652,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":378300,"millis":0.3783,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"CAMBIO DE CLAVE\""}},{"result":{"nanos":385400,"millis":0.3854,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CC\""}},{"result":{"nanos":247500,"millis":0.2475,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":60200,"millis":0.0602,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10290251400,"millis":10290.2514,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:22:17.398 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2030\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"6666\",\"atmId\":\"100931aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2322\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":751298,\"rrn\":\"09333\",\"dateTime\":\"20231102232200\",\"transactionType\":\"CAMBIO DE CLAVE\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"CC\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":751298},\"script\":\"[0X0A][0X1C][0X2C][0X3C]751298[0X0A][0X1C][0X2A][0X3A]6666[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]CAMBIO DE CLAVE[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 751298[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:27.671 response time in milliseconds: 10273\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:28 GMT\n1 < x-amzn-RequestId: bf4f369b-26a4-482a-8375-b843b2270c81\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKPHFNWIAMEhJQ=\n1 < X-Amzn-Trace-Id: Root=1-654323fa-70965e8b4a3ef94a1090d99d\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 22f93d92a360e7503437b796bfa15524.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: IpV2JMmiS87chquS8gqL9JXcCt3aGHJ8HBszsXMLZsZTNC3pOTDGhA==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":12700,"millis":0.0127,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":3304700,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":3.3047,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:27.687 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"6666\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"CAMBIO DE CLAVE\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"CC\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":281,"description":"","durationMillis":10338.6554,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-4","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898937347,"refId":"[1.18:281]","endTime":1698898947687,"exampleData":{"accountType":"CC","notifiFlag":"true","Type":"1","transaction":"CAMBIO DE CLAVE","financialCode":"6666","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":17},{"sectionIndex":0,"stepResults":[{"result":{"nanos":2080500,"millis":2.0805,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def bodyTrx = read('classpath:payloads\/NotiTrx.json')"},"stepLog":"23:22:17.462 karate.env system property was: null \n"},{"result":{"nanos":155100,"millis":0.1551,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def responseTimeRange = { min: 10, max: 15000 }"}},{"result":{"nanos":258800,"millis":0.2588,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def dataGenerator = Java.type('helper.DataGenerator')"}},{"result":{"nanos":585200,"millis":0.5852,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def NumReceipt = dataGenerator.getRandomNumReceipt()"}},{"result":{"nanos":316200,"millis":0.3162,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"set bodyTrx.payload[0].transaction.receipt = NumReceipt"}},{"result":{"nanos":278700,"millis":0.2787,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"set bodyTrx.payload[0].payment.fullAmount = NumReceipt"}},{"result":{"nanos":655200,"millis":0.6552,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()"}},{"result":{"nanos":4497000,"millis":4.497,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def dateTimes = karate.call('classpath:helper\/dateTime.js')"}},{"result":{"nanos":2324400,"millis":2.3244,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date"}},{"result":{"nanos":404200,"millis":0.4042,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora"}},{"result":{"nanos":325200,"millis":0.3252,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"set bodyTrx.payload[0].transaction.date = dateTimes.dia"}},{"result":{"nanos":155000,"millis":0.155,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":11,"text":"def valoresnumericos = []"}},{"result":{"nanos":218800,"millis":0.2188,"status":"passed"},"step":{"line":19,"prefix":"*","index":0,"text":"def sleep = function(pause){ java.lang.Thread.sleep(pause)}"}},{"result":{"nanos":41800,"millis":0.0418,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"url url"}},{"result":{"nanos":68600,"millis":0.0686,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"path pathUrl"}},{"result":{"nanos":50700,"millis":0.0507,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header x-api-key = apiKey"}},{"result":{"nanos":156100,"millis":0.1561,"status":"passed"},"step":{"line":23,"prefix":"*","index":4,"text":"def status = '00'"}},{"result":{"nanos":179500,"millis":0.1795,"status":"passed"},"step":{"line":24,"prefix":"And","index":5,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":781400,"millis":0.7814,"status":"passed"},"step":{"line":25,"prefix":"And","index":6,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0002\""}},{"result":{"nanos":197600,"millis":0.1976,"status":"passed"},"step":{"line":26,"prefix":"And","index":7,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":165400,"millis":0.1654,"status":"passed"},"step":{"line":27,"prefix":"And","index":8,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":536900,"millis":0.5369,"status":"passed"},"step":{"line":28,"prefix":"And","index":9,"text":"request bodyTrx.payload[0].transaction.transactionType = \"JDURAN trx CORRES\""}},{"result":{"nanos":140800,"millis":0.1408,"status":"passed"},"step":{"line":29,"prefix":"And","index":10,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":152000,"millis":0.152,"status":"passed"},"step":{"line":30,"prefix":"And","index":11,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":46400,"millis":0.0464,"status":"passed"},"step":{"line":31,"prefix":"And","index":12,"text":"request bodyTrx"}},{"result":{"nanos":10200266900,"millis":10200.2669,"status":"passed"},"step":{"line":32,"prefix":"When","index":13,"text":"method post"},"stepLog":"23:22:17.480 request:\n1 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/transactions\n1 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n1 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNjk4ODk4OTA1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE2OTg5MDA3MDUsImlhdCI6MTY5ODg5ODkwNSwidmVyc2lvbiI6MiwianRpIjoiMzQzZDhlZDMtYTFlMC00MGNlLThjMWYtYjM3ODA4NjRiMjg2IiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.AyGAafapTuv2l39yzt7gTOfcS3hiidQWKYh5MJv_xHtANoND87fsUEu2PKN5I1QYH3OXglKocSqe9BhSlXKdH0mSp0MjzrBV-5nO2cjpvtkfUEbkHt4zs-nPbxtQuMOW-XAXO6MT7ciJFWHNR6nSAFzd2MR2UeQGPJLCL8b41CJikOcwvkg3pN2vZU0mmly712Wk0Dcdc7AsegXuYdEpGLGzgeXZ2w7Qo87JqvKm9dOTJruv5XjZBu2UPWFqPtzTEIxUfzdhMuBSQh5Zdrv61okUBWlIG1nr8mOh28xRKpGxDafARUBUvJehal4IBgWCnZZIDDGQAmAA97GYhM8NLg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2033\n1 > Host: apicorr.redebanvd.net\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"correspondentId\":32692899,\"terminalId\":\"VOUCHER123\",\"techVersion\":\"V-T35ggT\",\"financialCode\":\"0002\",\"atmId\":\"92915aBcD\"},\"transaction\":{\"approvalNum\":\"x001A\",\"responseCode\":\"00\",\"status\":\"00\",\"date\":\"20231102\",\"hour\":\"2322\",\"authMode\":\"01\",\"inMode\":\"03X\",\"receipt\":490570,\"rrn\":\"09333\",\"dateTime\":\"20231102232200\",\"transactionType\":\"JDURAN trx CORRES\"},\"paymentMethod\":{\"franchise\":\"MASTERCARD\",\"millerNum\":\"54848948948\",\"card\":\"539612**7515\",\"accountType\":\"00\"},\"payment\":{\"taxBase\":\"0\",\"incAmount\":\"0\",\"ivaAmount\":\"0\",\"tipAmount\":\"0\",\"fullAmount\":490570},\"script\":\"[0X0A][0X1C][0X2C][0X3C]490570[0X0A][0X1C][0X2A][0X3A]0002[0X0A][0X1C][0X2A][0X3A]Status=00[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]JDURAN trx CORRES[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ 490570[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\",\"signature\":{\"signatureFlag\":true,\"signature\":\"424D560C(12)3E(6)28(6)1A01(4)56(7)10001(10)180C(36){6}(40)FC(70)7E(70)7E(70)3F(70)1F8(70)FC(70)7E(70)3F(70)3F(70)1F8(70)FC(70)FC(70)7E(70)3F(70)3F(70)1F8(70)7C(70)7C(70)3E(70)1F(70)1F(71)F8(70)F8(70)7C(70)3E(70)3E(70)1F(48)4(22)F8(47)7(22)F8(47)78(21)7C(47)7E(21)7C(47)7F(21)3E(47)3FC(20)3E(47)1FF(20)1F(48)FFC(19)1F(48)7FF(20)F8(47)1FFC(19)F8(48)3FF(19)7C(49)FFC(18)7C(49)3FF(18)3E(50)FFE(17)3E(50)3FFC(16)1F(51)FFF(16)1F(51)3FFE(16)F8(51)FFFC(15)F8(51)1FFF8(14)7C(52)3FFF(14)7C(53)FFFE(13)3E(53)1FFFE(12)3E(54)3{4}8(10)1F(55)7{4}C(9)1F(56){5}8(9)F8(55)1{4}E(9)F8(56)1{4}C(8)7C(58)7FFF8(7)7C(59)3FFF(7)7C(60)7FFF(6)3E(60)1FFFE(5)3E(61)3FFF8(4)1F(62)7FFE(4)1F(63)FFF80001F(64)FFF(4)F8(63)1FFC000F8(64)7FF000F8(64)1FFE00F8(65)7FFC07C(66)FFF87C(66)3FFF7C(67){4}C(67)1FFFC(68)3FF8(69)7E(71)E(968)\"},\"notification\":{\"notificationFlag\":\"true\",\"cellphone\":\"3177928280\",\"notificationType\":\"1\"}}]}\n\n23:22:27.671 response time in milliseconds: 10191\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 132\n1 < Connection: keep-alive\n1 < Date: Thu, 02 Nov 2023 04:22:28 GMT\n1 < x-amzn-RequestId: cc10020c-1a95-4f8e-9732-4c02f89c9018\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: NwKPHFZ9IAMEFcg=\n1 < X-Amzn-Trace-Id: Root=1-654323fa-3208bc27441d3b540e641503\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 d2a8ed168561f3bc7e1197e90d2c7298.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: BOG50-P1\n1 < X-Amz-Cf-Id: Ui8wh_vNYTMxE7hUTS-3Ds4jgOdsqnh5X4EtUeDNsMB51uSa-R2w0g==\n<html>\r\n<head><title>504 Gateway Time-out<\/title><\/head>\r\n<body>\r\n<center><h1>504 Gateway Time-out<\/h1><\/center>\r\n<\/body>\r\n<\/html>\r\n\n\n"},{"result":{"nanos":10200,"millis":0.0102,"status":"passed"},"step":{"line":33,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":1112800,"errorMessage":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","millis":1.1128,"status":"failed"},"step":{"line":34,"prefix":"And","index":15,"text":"match response.status[0].statusDescription == 'PROCESSED'"},"stepLog":"23:22:27.671 src\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\nAnd match response.status[0].statusDescription == 'PROCESSED'\njs failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"And","index":16,"text":"match response.resultObject[0].transaction.status == '00'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":17,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"*","index":18,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["#    Given url url","#    And path pathUrl","#    And header x-api-key = apiKey","#    * def status = '05'","#    And request bodyTrx.payload[0].transaction.status = status","#    And request bodyTrx.payload[0].commerce.financialCode = \"<financialCode>\"","#    And request bodyTrx.payload[0].notification.notificationFlag = \"<notifiFlag>\"","#    And request bodyTrx.payload[0].notification.notificationType = \"<Type>\"","#    And request bodyTrx.payload[0].transaction.transactionType = \"<transaction>\"","#    And request bodyTrx.payload[0].paymentMethod.accountType = \"<accountType>\"","#    And request bodyTrx.payload[0].script = <script>","#    And request bodyTrx","#    When method post","#    Then status 200","#    And match response.status[0].statusDescription == 'PROCESSED'","#    And match response.resultObject[0].transaction.status == '05'","#    And assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"],"line":55,"prefix":"*","index":19,"text":"eval sleep(700)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Given","index":20,"text":"url url"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":21,"text":"path pathUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":22,"text":"header x-api-key = apiKey"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":23,"text":"def status = '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":24,"text":"request bodyTrx.payload[0].transaction.status = status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"And","index":25,"text":"request bodyTrx.payload[0].commerce.financialCode = \"0002\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"And","index":26,"text":"request bodyTrx.payload[0].notification.notificationFlag = \"true\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"And","index":27,"text":"request bodyTrx.payload[0].notification.notificationType = \"1\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"And","index":28,"text":"request bodyTrx.payload[0].transaction.transactionType = \"JDURAN trx CORRES\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"And","index":29,"text":"request bodyTrx.payload[0].paymentMethod.accountType = \"00\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"And","index":30,"text":"request bodyTrx.payload[0].script = \"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"And","index":31,"text":"request bodyTrx"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"When","index":32,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"Then","index":33,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"And","index":34,"text":"match response.status[0].statusDescription == 'PROCESSED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"And","index":35,"text":"match response.resultObject[0].transaction.status == '04'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":36,"text":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"*","index":37,"text":"eval sleep(700)"}}],"line":284,"description":"","durationMillis":10216.1614,"failed":true,"error":"js failed:\n>>>>\n01: response.status[0].statusDescription\n<<<<\norg.graalvm.polyglot.PolyglotException: TypeError: Cannot read property \"0\" from undefined\n- <js>.:program(Unnamed:1)\n\nsrc\/test\/java\/notificaciones\/aprobada\/aprobadaOkKKKKKK.feature:34","executorName":"pool-1-thread-3","name":"peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma","startTime":1698898937462,"refId":"[1.19:284]","endTime":1698898947671,"exampleData":{"accountType":"00","notifiFlag":"true","Type":"1","transaction":"JDURAN trx CORRES","financialCode":"0002","script":"\"[0X0A][0X1C][0X2C][0X3C]\" +NumReceipt+ \"[0X0A][0X1C][0X2A][0X3A]\"+financialCode+\"[0X0A][0X1C][0X2A][0X3A]Status=\"+status+\"[0X0A][0X1C][0X2A][0X3A]CRA. 48 - 26-85[0X0A][0X1A][0X2A][0X3A]C.UNICO: 3007013108 [0X1B]TER: NETCOM02[0X0A][0X1A][0X2A][0X1C]RECIBO: 000024[0X1B] RRN: 828446[0X0A][0X1A][0X2A][0X3A]Producto: 1234567890[0X0A][0X1A][0X3C]\"+transaction+\"[0X1B]APRO: HOME76[0X0A][0X1A][0X3C]VALOR      [0X1B][0X2A]    $ \"+NumReceipt+\"[0X0A][0X1C][0X2A][0X3A]TU CORRESPONSAL BANCARIO NO DEBE[0X0A][0X1C]COBRARTE POR HACER ESTA TRANSACCION\""},"exampleIndex":18}],"callDepth":0,"name":"Ejecutar Endpoint para crear una transaccion aprobada con firma y validando distintos datos de respuesta","description":"","resultDate":"2023-11-01 11:22:27 p.m.","durationMillis":200516.5851,"passedCount":0}