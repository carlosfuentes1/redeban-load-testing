<!DOCTYPE html>
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<script src="js/jquery.min.js"></script>
<script src="js/jquery.tablesorter.min.js"></script>
<script src="js/Chart.min.js"></script>
<script src="js/moment.min.js"></script>
<script src="js/bootstrap.min.js"></script>

<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css"/>
<link rel="stylesheet" href="css/cucumber.css" type="text/css"/>
<link rel="stylesheet" href="css/font-awesome.min.css"/>
<link rel="shortcut icon" href="images/favicon.png"/>

<script>
$(document).ready(function() {
    // this will tell tablesorter to try looking for the data-value attribute
    // if present, it'll sort by that instead
    // otherwise, it'll sort by the text content of the table cell
    $("#tablesorter").tablesorter({
        textAttribute: 'data-value',
        // ignores the first row of the header, the 'scenario', 'steps', since
        // sorting those doesn't make sense
        selectorHeaders: '> thead tr:not(.dont-sort) th',
        // use a stable sort
        sortStable: true
    });
});
</script>











<title>Cucumber Reports  - Feature: ADQUI/TransaccionalADQUI00.feature</title>

</head>
<body>

<nav class="navbar navbar-default navbar-fixed-top" id="navigation">
  <div class="container-fluid">
    <div class="collapse navbar-collapse">
      <p class="navbar-text navbar-left">Cucumber Report</p>
      <ul class="nav navbar-nav navbar-right">
        <li role="presentation" ><a href="overview-features.html">Features</a></li>
        <li role="presentation" ><a href="overview-tags.html">Tags</a></li>
        <li role="presentation" ><a href="overview-steps.html">Steps</a></li>
        <li role="presentation" ><a href="overview-failures.html">Failures</a></li>
      </ul>
    </div>
  </div>
</nav>


<div class="container-fluid">
  <div class="col-md-5 col-md-offset-1">

<table class="table table-bordered" id="build-info">
  <thead>
    <tr>
      <th>Project</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    <tr class="info">
      <td>transacciones</td>
      <td>05 feb. 2024, 16:51</td>
    </tr>
  </tbody>
</table>

  </div>
  <div class="col-md-3 col-md-offset-2">
  </div>
</div>


<div id="report-lead" class="container-fluid">
  <div class="col-md-10 col-md-offset-1">
    <h2>Feature Report</h2>
  </div>
</div>


<div class="container-fluid" id="report">
  <div class="row">
    <div class="col-md-10 col-md-offset-1">
      <table class="stats-table">


<thead>
  <tr class="header dont-sort">
      <th></th>
    <th colspan="6">Steps</th>
    <th colspan="3">Scenarios</th>
    <th colspan="2">Features</th>
  </tr>
  <tr>
    <th>Feature</th>
    <th class="passed">Passed</th>
    <th class="failed">Failed</th>
    <th class="skipped">Skipped</th>
    <th class="pending">Pending</th>
    <th class="undefined">Undefined</th>
    <th class="total">Total</th>

    <th class="passed">Passed</th>
    <th class="failed">Failed</th>
    <th class="total">Total</th>

    <th>Duration</th>
    <th>Status</th>
  </tr>
</thead>


        <tbody>
        <tr>
          <td class="tagname">ADQUI/TransaccionalADQUI00.feature</td>
          <td      class="passed"    >1160</td>
          <td >0</td>
          <td >0</td>
          <td >0</td>
          <td >0</td>
          <td class="total">1160</td>

          <td  class="passed"    >36</td>
          <td >0</td>
          <td class="total">36</td>

          <td class="duration" data-value="29230133000">29.230</td>
          <td class="passed">Passed</td>
        </tr>
        </tbody>

      </table>
    </div>
  </div>
</div>



<div class="container-fluid">
  <div class="row">
    <div class="col-md-1 col-md-offset-10">
      <i class="fa fa-chevron-circle-down fa-2x collapsable-control"
        onClick="javascript:$('#report .collapsable-details').collapse('show')"></i>
      <i class="fa fa-chevron-circle-up fa-2x collapsable-control"
        onClick="javascript:$('#report .collapsable-details').collapse('hide')"></i>
    </div>
  </div>
</div>


<div class="container-fluid" id="report">
  <div class="row">
    <div class="col-md-10 col-md-offset-1">
      <div class="feature">

<div class="tags indention">
</div>


<div class="brief passed">
  <span class="keyword indention">Feature</span>
  <span class="name">ADQUI/TransaccionalADQUI00.feature</span>


</div>

        <div class="description indention">Ejecutar Endpoint para crear una transaccion aprobada con firma y validando distintos datos de respuesta</div>

        <div class="elements inner-level">

<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">1.693</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-1">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-1" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-2">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-2" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.095</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-3">
          <a>Doc string</a>
      </div>
      <div id="msg-3" class="collapse collapsable-details">
        <pre>16:51:08.754 karate.env system property was: dev-adqui 
16:51:10.140 this thread waited 1370 milliseconds for callSingle lock: classpath:helper/CrearTokenDEVADQUI.feature
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.067</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.096</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.018</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.081</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.006</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.051</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.004</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">1.235</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.004</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.021</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.701</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-4">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-4" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-5">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-5" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.005</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;AH&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;AMEX&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;VENTA&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.685</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-6">
          <a>Doc string</a>
      </div>
      <div id="msg-6" class="collapse collapsable-details">
        <pre>16:51:11.879 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2800
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;12697aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:213087,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:213087,&quot;rrn&quot;:213087,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;VENTA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;AMEX&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;89081278****9975&quot;,&quot;accountType&quot;:&quot;AH&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:213087,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:213087},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:12.555 response time in milliseconds: 676
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 764
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:10 GMT
1 &lt; x-amzn-RequestId: 5624de1c-5c6c-4fef-bb7f-97b59c716368
1 &lt; x-amz-apigw-id: Srq8WEODIAMEhqQ=
1 &lt; X-Amzn-Trace-Id: Root=1-65c1584e-62fa64e130823f12313cff6f
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 a095f5c394e0c42139106277f3743592.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: R8EDCSi84xWRCavndyvrXXwE47aow8B22Xej3FVOb9ag017lPjj6SA==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;12697aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE21308721308720240205165100&quot;,&quot;approvalNum&quot;:&quot;213087&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;213087&quot;,&quot;rrn&quot;:&quot;213087&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;VENTA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;AMEX&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;89081278****9975&quot;,&quot;accountType&quot;:&quot;AH&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;213087&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;213087&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE21308721308720240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165110&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">1.687</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-7">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-7" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-8">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-8" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.196</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-9">
          <a>Doc string</a>
      </div>
      <div id="msg-9" class="collapse collapsable-details">
        <pre>16:51:08.755 karate.env system property was: dev-adqui 
16:51:10.131 this thread waited 1362 milliseconds for callSingle lock: classpath:helper/CrearTokenDEVADQUI.feature
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.006</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.057</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.018</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.133</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.005</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.004</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">1.230</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.015</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.006</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.579</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-10">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-10" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-11">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-11" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.008</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;CC&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;BCO_SUP&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;LEALTAD&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.536</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-12">
          <a>Doc string</a>
      </div>
      <div id="msg-12" class="collapse collapsable-details">
        <pre>16:51:11.880 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2806
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;514871aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:304042,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:304042,&quot;rrn&quot;:304042,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;LEALTAD&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;BCO_SUP&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;39118367****1862&quot;,&quot;accountType&quot;:&quot;CC&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:304042,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:304042},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:12.397 response time in milliseconds: 517
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 770
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:10 GMT
1 &lt; x-amzn-RequestId: c915df5b-4102-4144-800e-3f5cc13441aa
1 &lt; x-amz-apigw-id: Srq8UFDhoAMEtVw=
1 &lt; X-Amzn-Trace-Id: Root=1-65c1584e-2f6833321e34fe577a53e9ea
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 17ce9cbcbc686d5320c94e5563c8e4e6.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: hPjmclaLncakIXKLAfG_0TG4xmvUI2ivX17Rs7OA2BtWK-NakH17aw==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;514871aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE30404230404220240205165100&quot;,&quot;approvalNum&quot;:&quot;304042&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;304042&quot;,&quot;rrn&quot;:&quot;304042&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;LEALTAD&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;BCO_SUP&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;39118367****1862&quot;,&quot;accountType&quot;:&quot;CC&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;304042&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;304042&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE30404230404220240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165110&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.016</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.008</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">2.937</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-13">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-13" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-14">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-14" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.485</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-15">
          <a>Doc string</a>
      </div>
      <div id="msg-15" class="collapse collapsable-details">
        <pre>16:51:10.130 &lt;&lt; lock released, cached callSingle: classpath:helper/CrearTokenDEVADQUI.feature
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name- passed">
  <span class="keyword indention"></span>
  <span class="name">helper/CrearTokenDEVADQUI.feature</span>

  <span class="lead-duration duration">0.000</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-16">
          <a>Doc string</a>
      </div>
      <div id="msg-16" class="collapse collapsable-details">
        <pre>{
  &quot;pathUrl&quot;: &quot;/transactional/api/vouchers/transactions&quot;,
  &quot;apiToken&quot;: &quot;https://voucherdigitalclouddev.auth.us-east-1.amazoncognito.com/oauth2/token&quot;,
  &quot;url&quot;: &quot;https://api.redebanvd.net&quot;,
  &quot;apiKey&quot;: &quot;tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g&quot;,
  &quot;tokenAuthorization&quot;: &quot;Basic M2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2U6MWQ4cjQyNDNicjMwYm1kcjB2ajJkMjYydTJwZWU5NjY5ZmdrNXQxZ2M3ZTZ1YWc0bTd0ZA==&quot;
}
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-&amp;gt; Given passed">
  <span class="keyword indention">&gt; Given</span>
  <span class="name">url apiToken</span>

  <span class="lead-duration duration">0.001</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-17">
          <a>Doc string</a>
      </div>
      <div id="msg-17" class="collapse collapsable-details">
        <pre>16:51:08.755 karate.env system property was: dev-adqui 
16:51:08.769 &gt;&gt; lock acquired, begin callSingle: classpath:helper/CrearTokenDEVADQUI.feature
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-&amp;gt; And passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">header Content-Type = 'application/x-www-form-urlencoded'</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-&amp;gt; And passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">header Authorization = tokenAuthorization</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-&amp;gt; And passed">
  <span class="keyword indention">&gt; And</span>
  <span class="name">request 'grant_type=client_credentials&amp;Scope=consumers%2Ffabrica'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-&amp;gt; When passed">
  <span class="keyword indention">&gt; When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">1.268</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-18">
          <a>Doc string</a>
      </div>
      <div id="msg-18" class="collapse collapsable-details">
        <pre>16:51:09.295 request:
1 &gt; POST https://voucherdigitalclouddev.auth.us-east-1.amazoncognito.com/oauth2/token
1 &gt; Content-Type: application/x-www-form-urlencoded; charset=UTF-8
1 &gt; Authorization: Basic M2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2U6MWQ4cjQyNDNicjMwYm1kcjB2ajJkMjYydTJwZWU5NjY5ZmdrNXQxZ2M3ZTZ1YWc0bTd0ZA==
1 &gt; Content-Length: 55
1 &gt; Host: voucherdigitalclouddev.auth.us-east-1.amazoncognito.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
grant_type=client_credentials&amp;Scope=consumers%2Ffabrica

16:51:10.057 response time in milliseconds: 748
1 &lt; 200
1 &lt; Date: Mon, 05 Feb 2024 21:51:08 GMT
1 &lt; Content-Type: application/json;charset=UTF-8
1 &lt; Transfer-Encoding: chunked
1 &lt; Connection: keep-alive
1 &lt; Content-Security-Policy-Report-Only: script-src https://d3oia8etllorh5.cloudfront.net https://voucherdigitalclouddev.auth.us-east-1.amazoncognito.com; style-src https://d3oia8etllorh5.cloudfront.net https://voucherdigitalclouddev.auth.us-east-1.amazoncognito.com; img-src https://d3oia8etllorh5.cloudfront.net https://voucherdigitalclouddev.auth.us-east-1.amazoncognito.com; report-uri https://voucherdigitalclouddev.auth.us-east-1.amazoncognito.com/cspreport
1 &lt; x-amz-cognito-request-id: 80f28605-068e-49de-9de0-be968a04d6e0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-XSS-Protection: 1; mode=block
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Pragma: no-cache
1 &lt; Expires: 0
1 &lt; Strict-Transport-Security: max-age=31536000 ; includeSubDomains
1 &lt; X-Frame-Options: DENY
1 &lt; Server: Server
1 &lt; Set-Cookie: XSRF-TOKEN=c821def1-614c-4d0b-b763-abaea983901b; Domain=voucherdigitalclouddev.auth.us-east-1.amazoncognito.com; Secure
{&quot;access_token&quot;:&quot;eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A&quot;,&quot;expires_in&quot;:1800,&quot;token_type&quot;:&quot;Bearer&quot;}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-&amp;gt; Then passed">
  <span class="keyword indention">&gt; Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-&amp;gt; * passed">
  <span class="keyword indention">&gt; *</span>
  <span class="name">def access_token = response.access_token</span>

  <span class="lead-duration duration">0.007</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.004</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">1.106</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.018</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.021</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.557</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-19">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-19" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-20">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-20" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;CR&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;DINERSCLUB&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;PUNTOS COLOMBIA&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.532</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-21">
          <a>Doc string</a>
      </div>
      <div id="msg-21" class="collapse collapsable-details">
        <pre>16:51:11.898 request:
2 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
2 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
2 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
2 &gt; Content-Type: application/json; charset=UTF-8
2 &gt; Content-Length: 2817
2 &gt; Host: api.redebanvd.net
2 &gt; Connection: Keep-Alive
2 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
2 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;743669aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:414925,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:414925,&quot;rrn&quot;:414925,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;PUNTOS COLOMBIA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;DINERSCLUB&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;27723903****6367&quot;,&quot;accountType&quot;:&quot;CR&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:414925,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:414925},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:12.404 response time in milliseconds: 506
2 &lt; 200
2 &lt; Content-Type: application/json
2 &lt; Content-Length: 781
2 &lt; Connection: keep-alive
2 &lt; Date: Mon, 05 Feb 2024 21:51:10 GMT
2 &lt; x-amzn-RequestId: 6fb7d8eb-5701-4007-ad4f-44ded12137ea
2 &lt; x-amz-apigw-id: Srq8UGdjIAMEFqQ=
2 &lt; X-Amzn-Trace-Id: Root=1-65c1584e-5cd8c1641e0968d64fc1938f
2 &lt; X-Cache: Miss from cloudfront
2 &lt; Via: 1.1 41214e21a06ae299a8c0c72752b81bac.cloudfront.net (CloudFront)
2 &lt; X-Amz-Cf-Pop: LIM50-P1
2 &lt; X-Amz-Cf-Id: CQaX-LIGC2m6HmoZQHOERJgM5lfrvbQ9iqUg4Bp83juaBC0h-mjQWQ==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;743669aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE41492541492520240205165100&quot;,&quot;approvalNum&quot;:&quot;414925&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;414925&quot;,&quot;rrn&quot;:&quot;414925&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;PUNTOS COLOMBIA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;DINERSCLUB&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;27723903****6367&quot;,&quot;accountType&quot;:&quot;CR&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;414925&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;414925&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE41492541492520240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165110&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.008</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.008</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">1.642</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-22">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-22" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-23">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-23" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.680</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-24">
          <a>Doc string</a>
      </div>
      <div id="msg-24" class="collapse collapsable-details">
        <pre>16:51:08.754 karate.env system property was: dev-adqui 
16:51:10.139 this thread waited 1368 milliseconds for callSingle lock: classpath:helper/CrearTokenDEVADQUI.feature
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.010</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.008</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.020</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.885</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.006</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.008</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.650</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-25">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-25" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-26">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-26" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;LT&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;MAESTRO&quot;</span>

  <span class="lead-duration duration">0.010</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;LEALTADPLUS&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.625</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-27">
          <a>Doc string</a>
      </div>
      <div id="msg-27" class="collapse collapsable-details">
        <pre>16:51:11.892 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2810
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;218564aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:998464,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:998464,&quot;rrn&quot;:998464,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;LEALTADPLUS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MAESTRO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;57742894****9746&quot;,&quot;accountType&quot;:&quot;LT&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:998464,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:998464},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:12.503 response time in milliseconds: 611
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 774
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:10 GMT
1 &lt; x-amzn-RequestId: 8f2e5211-1293-4b70-bd79-e400e6403b36
1 &lt; x-amz-apigw-id: Srq8VETFoAMEmQw=
1 &lt; X-Amzn-Trace-Id: Root=1-65c1584e-050c65a335cdb0492c04f5e5
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 f7f58294d1419cb7835c1addaee1386c.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: gUwTt-k-XYL136XgJyX7dQVfP1PFC0vy-Ftr5JjtZbdYGKZA5G4kwA==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;218564aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE99846499846420240205165100&quot;,&quot;approvalNum&quot;:&quot;998464&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;998464&quot;,&quot;rrn&quot;:&quot;998464&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;LEALTADPLUS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MAESTRO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;57742894****9746&quot;,&quot;accountType&quot;:&quot;LT&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;998464&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;998464&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE99846499846420240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165110&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.120</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-28">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-28" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-29">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-29" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.003</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-30">
          <a>Doc string</a>
      </div>
      <div id="msg-30" class="collapse collapsable-details">
        <pre>16:51:12.439 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.004</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.006</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.068</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.007</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.012</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.453</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-31">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-31" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-32">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-32" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;CM&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;CREDENCIAL&quot;</span>

  <span class="lead-duration duration">0.008</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;T. PRIVADA&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.438</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-33">
          <a>Doc string</a>
      </div>
      <div id="msg-33" class="collapse collapsable-details">
        <pre>16:51:12.580 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2812
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;844162aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:946718,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:946718,&quot;rrn&quot;:946718,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;T. PRIVADA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;CREDENCIAL&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;52353948****3624&quot;,&quot;accountType&quot;:&quot;CM&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:946718,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:946718},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:13.015 response time in milliseconds: 434
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 776
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:11 GMT
1 &lt; x-amzn-RequestId: a63256d5-516d-439b-8abc-8394958dd4ed
1 &lt; x-amz-apigw-id: Srq8bHluoAMEAJw=
1 &lt; X-Amzn-Trace-Id: Root=1-65c1584f-378441c45289242e4b85b3d3
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 c919c9f17e93c83384b6ac4ae98b8bba.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: XuOmhhnOXfgyW-rQtwxwue0if30_NHXpmGItpUHqtVWBqR9nsoy_JA==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;844162aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE94671894671820240205165100&quot;,&quot;approvalNum&quot;:&quot;946718&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;946718&quot;,&quot;rrn&quot;:&quot;946718&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;T. PRIVADA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;CREDENCIAL&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;52353948****3624&quot;,&quot;accountType&quot;:&quot;CM&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;946718&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;946718&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE94671894671820240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165111&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.265</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-34">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-34" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-35">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-35" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.232</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-36">
          <a>Doc string</a>
      </div>
      <div id="msg-36" class="collapse collapsable-details">
        <pre>16:51:12.437 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.014</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.652</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-37">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-37" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-38">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-38" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;CU&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;MASTERCARD&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;TOTAL BONOS&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.645</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-39">
          <a>Doc string</a>
      </div>
      <div id="msg-39" class="collapse collapsable-details">
        <pre>16:51:12.721 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2813
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;120825aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:265567,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:265567,&quot;rrn&quot;:265567,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;TOTAL BONOS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MASTERCARD&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;54016749****6526&quot;,&quot;accountType&quot;:&quot;CU&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:265567,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:265567},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:13.358 response time in milliseconds: 637
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 777
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:11 GMT
1 &lt; x-amzn-RequestId: 3fe7e7ec-3924-4c16-bf87-f346cb51103c
1 &lt; x-amz-apigw-id: Srq8eFU_IAMEWmQ=
1 &lt; X-Amzn-Trace-Id: Root=1-65c1584f-7aa087163c93ed2429b90781
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 41214e21a06ae299a8c0c72752b81bac.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: ouTvhoWXTN1B3G2Pbsr4D5wx-cNV3FVSvOJAlOHOVmxOh37C31a9Dg==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;120825aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE26556726556720240205165100&quot;,&quot;approvalNum&quot;:&quot;265567&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;265567&quot;,&quot;rrn&quot;:&quot;265567&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;TOTAL BONOS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MASTERCARD&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;54016749****6526&quot;,&quot;accountType&quot;:&quot;CU&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;265567&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;265567&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE26556726556720240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165111&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.089</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-40">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-40" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-41">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-41" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.004</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-42">
          <a>Doc string</a>
      </div>
      <div id="msg-42" class="collapse collapsable-details">
        <pre>16:51:12.522 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.012</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.026</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.032</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.438</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-43">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-43" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-44">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-44" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;BE&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;VISA DEBIT&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;BONOS RECARGABLES&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.428</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-45">
          <a>Doc string</a>
      </div>
      <div id="msg-45" class="collapse collapsable-details">
        <pre>16:51:12.629 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2819
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;619704aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:688036,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:688036,&quot;rrn&quot;:688036,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;BONOS RECARGABLES&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;VISA DEBIT&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;96243658****8495&quot;,&quot;accountType&quot;:&quot;BE&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:688036,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:688036},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:13.053 response time in milliseconds: 424
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 783
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:11 GMT
1 &lt; x-amzn-RequestId: 7bede04a-b2d2-412b-b7eb-46c9b7f17cca
1 &lt; x-amz-apigw-id: Srq8bHq7IAMEAHA=
1 &lt; X-Amzn-Trace-Id: Root=1-65c1584f-4e0f1ebe1d3da7047a729c95
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 f000be4440afdd3a3d6413434446dab2.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: HVIa-j6HYIo-AP3A7kyuEfjs26opKk050tn4kK5q5Vv9C7mBTde2KQ==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;619704aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE68803668803620240205165100&quot;,&quot;approvalNum&quot;:&quot;688036&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;688036&quot;,&quot;rrn&quot;:&quot;688036&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;BONOS RECARGABLES&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;VISA DEBIT&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;96243658****8495&quot;,&quot;accountType&quot;:&quot;BE&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;688036&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;688036&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE68803668803620240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165111&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.134</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-46">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-46" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-47">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-47" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.101</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-48">
          <a>Doc string</a>
      </div>
      <div id="msg-48" class="collapse collapsable-details">
        <pre>16:51:12.568 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.014</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.609</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-49">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-49" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-50">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-50" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.010</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;RT&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;V.ELECTRON&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;PCR&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.589</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-51">
          <a>Doc string</a>
      </div>
      <div id="msg-51" class="collapse collapsable-details">
        <pre>16:51:12.727 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2805
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;674736aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:622425,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:622425,&quot;rrn&quot;:622425,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;PCR&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;V.ELECTRON&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;23499289****1342&quot;,&quot;accountType&quot;:&quot;RT&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:622425,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:622425},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:13.314 response time in milliseconds: 586
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 769
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:11 GMT
1 &lt; x-amzn-RequestId: dbaf49cf-9be9-47da-a937-e87181cddfb3
1 &lt; x-amz-apigw-id: Srq8eFIJoAMEUzw=
1 &lt; X-Amzn-Trace-Id: Root=1-65c1584f-4690103f69ad7bcc5e487746
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 672a274f5830cff711168a1debfae76c.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: FzuB9d3YStxHH9FF3yN0Njpt1yKJLU3fYaRHSqEEUg19dvkG8PHrIA==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;674736aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE62242562242520240205165100&quot;,&quot;approvalNum&quot;:&quot;622425&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;622425&quot;,&quot;rrn&quot;:&quot;622425&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;PCR&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;V.ELECTRON&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;23499289****1342&quot;,&quot;accountType&quot;:&quot;RT&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;622425&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;622425&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE62242562242520240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165111&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.123</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-52">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-52" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-53">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-53" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.006</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-54">
          <a>Doc string</a>
      </div>
      <div id="msg-54" class="collapse collapsable-details">
        <pre>16:51:13.029 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.096</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.395</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-55">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-55" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-56">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-56" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;RG&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;CREDITO P&quot;</span>

  <span class="lead-duration duration">0.004</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;RECARGA EFECTIVO&quot;</span>

  <span class="lead-duration duration">0.004</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.377</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-57">
          <a>Doc string</a>
      </div>
      <div id="msg-57" class="collapse collapsable-details">
        <pre>16:51:13.176 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2817
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;169188aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:764465,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:764465,&quot;rrn&quot;:764465,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;RECARGA EFECTIVO&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;CREDITO P&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;54852459****3755&quot;,&quot;accountType&quot;:&quot;RG&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:764465,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:764465},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:13.550 response time in milliseconds: 374
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 781
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:11 GMT
1 &lt; x-amzn-RequestId: d5b065da-8c26-4a14-b6eb-2b7682ac979f
1 &lt; x-amz-apigw-id: Srq8gHwSIAMEDqQ=
1 &lt; X-Amzn-Trace-Id: Root=1-65c1584f-35cf28bc79f18bc657b6f37a
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 17ce9cbcbc686d5320c94e5563c8e4e6.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: TDfbpjflK9A7rk8hdeW2h8Tzht6MvHpPVUHhx2trevak960e91Cwug==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;169188aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE76446576446520240205165100&quot;,&quot;approvalNum&quot;:&quot;764465&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;764465&quot;,&quot;rrn&quot;:&quot;764465&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;RECARGA EFECTIVO&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;CREDITO P&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;54852459****3755&quot;,&quot;accountType&quot;:&quot;RG&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;764465&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;764465&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE76446576446520240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165111&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.044</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-58">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-58" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-59">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-59" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.007</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-60">
          <a>Doc string</a>
      </div>
      <div id="msg-60" class="collapse collapsable-details">
        <pre>16:51:13.067 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.009</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.013</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.386</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-61">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-61" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-62">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-62" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;DS&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;T. ALKOSTO&quot;</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;RECARGAS&quot;</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.371</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-63">
          <a>Doc string</a>
      </div>
      <div id="msg-63" class="collapse collapsable-details">
        <pre>16:51:13.130 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2810
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;343071aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:968399,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:968399,&quot;rrn&quot;:968399,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;RECARGAS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;T. ALKOSTO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;39483169****6219&quot;,&quot;accountType&quot;:&quot;DS&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:968399,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:968399},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:13.498 response time in milliseconds: 368
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 774
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:11 GMT
1 &lt; x-amzn-RequestId: ed9d2239-a1b7-47f8-a1c4-04c8c5d2f2aa
1 &lt; x-amz-apigw-id: Srq8fHW3IAMESuQ=
1 &lt; X-Amzn-Trace-Id: Root=1-65c1584f-48f345ea626a9adc52d92c30
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 17ce9cbcbc686d5320c94e5563c8e4e6.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: 2E1pepg5Ykppq1bSXiyp7Cfaos4A741IMPdQyBrGsLEeZWV3Q_CuEg==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;343071aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE96839996839920240205165100&quot;,&quot;approvalNum&quot;:&quot;968399&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;968399&quot;,&quot;rrn&quot;:&quot;968399&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;RECARGAS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;T. ALKOSTO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;39483169****6219&quot;,&quot;accountType&quot;:&quot;DS&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;968399&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;968399&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE96839996839920240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165111&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.035</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-64">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-64" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-65">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-65" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.007</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-66">
          <a>Doc string</a>
      </div>
      <div id="msg-66" class="collapse collapsable-details">
        <pre>16:51:13.322 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.014</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.686</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-67">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-67" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-68">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-68" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;BC&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;TUYA&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;EFECTIVO&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.677</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-69">
          <a>Doc string</a>
      </div>
      <div id="msg-69" class="collapse collapsable-details">
        <pre>16:51:13.369 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2804
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;768434aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:868892,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:868892,&quot;rrn&quot;:868892,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;EFECTIVO&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;TUYA&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;28913857****2297&quot;,&quot;accountType&quot;:&quot;BC&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:868892,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:868892},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:14.043 response time in milliseconds: 674
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 768
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:12 GMT
1 &lt; x-amzn-RequestId: cb87ba8c-4927-45b4-95ff-4dbc8540e611
1 &lt; x-amz-apigw-id: Srq8lFvioAMEE9w=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15850-68c38b3e6dbec4a921843997
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 1363962ebe43751f885359ece2e8196a.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: gBDJkgmWAzesBkKeXwIyr-SHvN0UDtx0ukqOhCQmnHtmnxtF1YrggA==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;768434aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE86889286889220240205165100&quot;,&quot;approvalNum&quot;:&quot;868892&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;868892&quot;,&quot;rrn&quot;:&quot;868892&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;EFECTIVO&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;TUYA&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;28913857****2297&quot;,&quot;accountType&quot;:&quot;BC&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;868892&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;868892&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE86889286889220240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165112&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.039</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-70">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-70" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-71">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-71" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.003</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-72">
          <a>Doc string</a>
      </div>
      <div id="msg-72" class="collapse collapsable-details">
        <pre>16:51:13.364 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.022</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.445</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-73">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-73" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-74">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-74" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;BD&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;PRIVADACR&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;IMPUESTOS&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.437</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-75">
          <a>Doc string</a>
      </div>
      <div id="msg-75" class="collapse collapsable-details">
        <pre>16:51:13.414 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2809
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;12653aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:958918,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:958918,&quot;rrn&quot;:958918,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;IMPUESTOS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;PRIVADACR&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;23546420****4778&quot;,&quot;accountType&quot;:&quot;BD&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:958918,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:958918},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:13.849 response time in milliseconds: 432
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 773
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:12 GMT
1 &lt; x-amzn-RequestId: ac7c8b11-98ba-4eba-a0f3-e64983e9d10b
1 &lt; x-amz-apigw-id: Srq8jEVEIAMEfaw=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15850-710465d42569933b3274f90d
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 cef9da1b4a6e82d7b1f4fa1d1057cf94.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: IGUyWYtVW6GAXjju0BitZAxSO9fAyjjUgFRN-Jj9Ln0CAeJV5hP5lA==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;12653aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE95891895891820240205165100&quot;,&quot;approvalNum&quot;:&quot;958918&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;958918&quot;,&quot;rrn&quot;:&quot;958918&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;IMPUESTOS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;PRIVADACR&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;23546420****4778&quot;,&quot;accountType&quot;:&quot;BD&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;958918&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;958918&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE95891895891820240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165112&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.022</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-76">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-76" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-77">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-77" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.006</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-78">
          <a>Doc string</a>
      </div>
      <div id="msg-78" class="collapse collapsable-details">
        <pre>16:51:13.509 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.006</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.650</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-79">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-79" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-80">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-80" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;SP&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;CREDENVISA&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;WIZEO&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.643</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-81">
          <a>Doc string</a>
      </div>
      <div id="msg-81" class="collapse collapsable-details">
        <pre>16:51:13.544 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2807
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;170075aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:892695,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:892695,&quot;rrn&quot;:892695,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;WIZEO&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;CREDENVISA&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;75759358****6373&quot;,&quot;accountType&quot;:&quot;SP&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:892695,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:892695},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:14.184 response time in milliseconds: 640
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 771
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:12 GMT
1 &lt; x-amzn-RequestId: c170e78b-9a1b-4602-9e28-6a4ac41dcf56
1 &lt; x-amz-apigw-id: Srq8mH4TIAMEdTQ=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15850-07fd6af4212706e3274ec0ab
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 cdf2e63ca525f9a875840d49cccd3ba6.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: tk966sb7aoyx7gGUgsQM-XVHLpZWfj-fDTed_u-H8KNon7MiyiOqVw==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;170075aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE89269589269520240205165100&quot;,&quot;approvalNum&quot;:&quot;892695&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;892695&quot;,&quot;rrn&quot;:&quot;892695&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;WIZEO&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;CREDENVISA&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;75759358****6373&quot;,&quot;accountType&quot;:&quot;SP&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;892695&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;892695&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE89269589269520240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165112&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.023</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-82">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-82" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-83">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-83" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.004</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-84">
          <a>Doc string</a>
      </div>
      <div id="msg-84" class="collapse collapsable-details">
        <pre>16:51:13.566 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.009</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.596</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-85">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-85" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-86">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-86" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;00&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;COLSUBISIDIO&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;OPS&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.588</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-87">
          <a>Doc string</a>
      </div>
      <div id="msg-87" class="collapse collapsable-details">
        <pre>16:51:13.602 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2807
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;276347aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:415709,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:415709,&quot;rrn&quot;:415709,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;OPS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;COLSUBISIDIO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;52275574****6805&quot;,&quot;accountType&quot;:&quot;00&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:415709,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:415709},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:14.187 response time in milliseconds: 584
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 771
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:12 GMT
1 &lt; x-amzn-RequestId: 85b1ef3c-8cf3-43cd-a4e4-b9dfc688aa88
1 &lt; x-amz-apigw-id: Srq8nELeIAMEaMg=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15850-16803a745e1dcfac3820575b
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 6a8bde05883e3a529e47f40f0d9e7aaa.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: Q5BoZkcx4kIvNSSSzxj9_S148cxGRquHMwPix92VJAyQMYZnfdXMdQ==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;276347aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE41570941570920240205165100&quot;,&quot;approvalNum&quot;:&quot;415709&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;415709&quot;,&quot;rrn&quot;:&quot;415709&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;OPS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;COLSUBISIDIO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;52275574****6805&quot;,&quot;accountType&quot;:&quot;00&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;415709&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;415709&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE41570941570920240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165112&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.040</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-88">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-88" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-89">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-89" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.003</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-90">
          <a>Doc string</a>
      </div>
      <div id="msg-90" class="collapse collapsable-details">
        <pre>16:51:13.856 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.008</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.018</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.344</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-91">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-91" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-92">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-92" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;LT&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;CAJA C.F.&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;LIFEMILES&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.334</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-93">
          <a>Doc string</a>
      </div>
      <div id="msg-93" class="collapse collapsable-details">
        <pre>16:51:13.910 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2810
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;267245aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:423614,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:423614,&quot;rrn&quot;:423614,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;LIFEMILES&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;CAJA C.F.&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;66784110****3205&quot;,&quot;accountType&quot;:&quot;LT&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:423614,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:423614},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:14.241 response time in milliseconds: 330
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 774
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:12 GMT
1 &lt; x-amzn-RequestId: eeb29536-9b0b-45aa-a81d-1daddc76f45d
1 &lt; x-amz-apigw-id: Srq8nHhZIAMEY3A=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15850-1033a910265a44475960b417
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 8b0b556682aca246cac2962455e370be.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: datfgGLV7Y8f5g3zCxe2wpLZPcm8YO5vW0rjOKnkPjAZZgpgqEMH4w==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;267245aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE42361442361420240205165100&quot;,&quot;approvalNum&quot;:&quot;423614&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;423614&quot;,&quot;rrn&quot;:&quot;423614&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;LIFEMILES&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;CAJA C.F.&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;66784110****3205&quot;,&quot;accountType&quot;:&quot;LT&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;423614&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;423614&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE42361442361420240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165112&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.023</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-94">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-94" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-95">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-95" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.004</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-96">
          <a>Doc string</a>
      </div>
      <div id="msg-96" class="collapse collapsable-details">
        <pre>16:51:14.054 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.009</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.550</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-97">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-97" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-98">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-98" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;CM&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;T. PRIVADA&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;QR&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.542</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-99">
          <a>Doc string</a>
      </div>
      <div id="msg-99" class="collapse collapsable-details">
        <pre>16:51:14.089 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2804
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;868217aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:170341,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:170341,&quot;rrn&quot;:170341,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;QR&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;T. PRIVADA&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;54365262****5108&quot;,&quot;accountType&quot;:&quot;CM&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:170341,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:170341},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:14.629 response time in milliseconds: 540
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 768
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:12 GMT
1 &lt; x-amzn-RequestId: 2b57487e-c8bd-43fe-baae-396cc65422d5
1 &lt; x-amz-apigw-id: Srq8rEEsIAMEYeQ=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15850-61b6486723eaedaf1c003942
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 1363962ebe43751f885359ece2e8196a.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: in-2QMN95beIbLGfMKlGeo7JrluL8cNbog_OR-7GT-0WEcPd-KupJw==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;868217aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE17034117034120240205165100&quot;,&quot;approvalNum&quot;:&quot;170341&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;170341&quot;,&quot;rrn&quot;:&quot;170341&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;QR&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;T. PRIVADA&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;54365262****5108&quot;,&quot;accountType&quot;:&quot;CM&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;170341&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;170341&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE17034117034120240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165112&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.077</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-100">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-100" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-101">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-101" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.013</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-102">
          <a>Doc string</a>
      </div>
      <div id="msg-102" class="collapse collapsable-details">
        <pre>16:51:14.193 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.004</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.043</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.580</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-103">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-103" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-104">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-104" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;CU&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;T. CREDITO&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;PSP&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.569</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-105">
          <a>Doc string</a>
      </div>
      <div id="msg-105" class="collapse collapsable-details">
        <pre>16:51:14.289 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2805
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;788857aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:451816,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:451816,&quot;rrn&quot;:451816,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;PSP&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;T. CREDITO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;42231900****8181&quot;,&quot;accountType&quot;:&quot;CU&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:451816,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:451816},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:14.852 response time in milliseconds: 563
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 769
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:13 GMT
1 &lt; x-amzn-RequestId: ea4a25c3-4a9b-4add-96b0-04788cd97859
1 &lt; x-amz-apigw-id: Srq8tEz1IAMEioQ=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15851-2217f16b2b15a59540338dc9
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 8753a5890eda67f9db56cde3f25f5a28.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: jdVHJsnmg5NfQUYIG5weygT79D8LNpqMw2FK9E1Iu2Yb_OsFVudZjQ==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;788857aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE45181645181620240205165100&quot;,&quot;approvalNum&quot;:&quot;451816&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;451816&quot;,&quot;rrn&quot;:&quot;451816&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;PSP&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;T. CREDITO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;42231900****8181&quot;,&quot;accountType&quot;:&quot;CU&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;451816&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;451816&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE45181645181620240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165113&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.055</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-106">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-106" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-107">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-107" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.011</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-108">
          <a>Doc string</a>
      </div>
      <div id="msg-108" class="collapse collapsable-details">
        <pre>16:51:14.195 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.023</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.004</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.585</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-109">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-109" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-110">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-110" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;LC&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;T. EXITO&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;NODATA&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.575</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-111">
          <a>Doc string</a>
      </div>
      <div id="msg-111" class="collapse collapsable-details">
        <pre>16:51:14.267 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2806
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;702359aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:975393,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:975393,&quot;rrn&quot;:975393,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;NODATA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;T. EXITO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;23203723****9867&quot;,&quot;accountType&quot;:&quot;LC&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:975393,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:975393},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:14.839 response time in milliseconds: 571
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 770
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:13 GMT
1 &lt; x-amzn-RequestId: d689b99d-3ca1-4123-8402-e54526af7ce3
1 &lt; x-amz-apigw-id: Srq8tH0cIAMEKvg=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15851-02ffe24c38a420482d0cca84
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 044bedb33ca0f4efa619a47252c438ba.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: adA2Yxny0aPVyHt1KZeIRDbpn09zBeQ2Q7WSLXFpBL7_l_uJZ6pUJg==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;702359aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE97539397539320240205165100&quot;,&quot;approvalNum&quot;:&quot;975393&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;975393&quot;,&quot;rrn&quot;:&quot;975393&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;NODATA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;T. EXITO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;23203723****9867&quot;,&quot;accountType&quot;:&quot;LC&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;975393&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;975393&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE97539397539320240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165113&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.025</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-112">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-112" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-113">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-113" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.009</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-114">
          <a>Doc string</a>
      </div>
      <div id="msg-114" class="collapse collapsable-details">
        <pre>16:51:14.249 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.008</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.588</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-115">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-115" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-116">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-116" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;MD&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;C.M.R&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;VENTA&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.582</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-117">
          <a>Doc string</a>
      </div>
      <div id="msg-117" class="collapse collapsable-details">
        <pre>16:51:14.284 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2802
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;992360aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:605828,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:605828,&quot;rrn&quot;:605828,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;VENTA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;C.M.R&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;47401580****6225&quot;,&quot;accountType&quot;:&quot;MD&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:605828,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:605828},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:14.864 response time in milliseconds: 579
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 766
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:13 GMT
1 &lt; x-amzn-RequestId: 38aa2cae-67f4-4348-991e-379f39b22c0e
1 &lt; x-amz-apigw-id: Srq8tEkHoAMEe8w=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15851-115c97c443050571570408bc
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 e778332efddc53006b892e6757c89284.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: p8K4ZPiwxwV6xcgyJRpQyCoQtvUjwB9A9fTl1cYiRTQ-rHYvgC-AxA==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;992360aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE60582860582820240205165100&quot;,&quot;approvalNum&quot;:&quot;605828&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;605828&quot;,&quot;rrn&quot;:&quot;605828&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;VENTA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;C.M.R&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;47401580****6225&quot;,&quot;accountType&quot;:&quot;MD&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;605828&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;605828&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE60582860582820240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165113&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.016</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-118">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-118" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-119">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-119" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.002</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-120">
          <a>Doc string</a>
      </div>
      <div id="msg-120" class="collapse collapsable-details">
        <pre>16:51:14.635 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.007</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.542</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-121">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-121" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-122">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-122" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;AM&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;TARL TCO&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;LEALTAD&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.538</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-123">
          <a>Doc string</a>
      </div>
      <div id="msg-123" class="collapse collapsable-details">
        <pre>16:51:14.659 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2807
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;620952aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:972382,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:972382,&quot;rrn&quot;:972382,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;LEALTAD&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;TARL TCO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;96121467****6060&quot;,&quot;accountType&quot;:&quot;AM&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:972382,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:972382},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:15.195 response time in milliseconds: 536
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 771
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:13 GMT
1 &lt; x-amzn-RequestId: cf69d8c1-285c-4be5-a27a-7fa0359bf3ce
1 &lt; x-amz-apigw-id: Srq8xHaBoAMEvPg=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15851-58aebade484174b33b37a3a0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 a38978c3b0d2780767b50bf2a7b840f8.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: B8LTQUKsQQgO2cg8hdadorIF8W76BJZj3HchEKCvJgXRhGdTWWLObA==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;620952aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE97238297238220240205165100&quot;,&quot;approvalNum&quot;:&quot;972382&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;972382&quot;,&quot;rrn&quot;:&quot;972382&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;LEALTAD&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;TARL TCO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;96121467****6060&quot;,&quot;accountType&quot;:&quot;AM&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;972382&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;972382&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE97238297238220240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165113&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.022</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-124">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-124" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-125">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-125" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.003</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-126">
          <a>Doc string</a>
      </div>
      <div id="msg-126" class="collapse collapsable-details">
        <pre>16:51:14.844 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.010</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.628</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-127">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-127" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-128">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-128" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;NC&quot;</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;PRIVADA&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;PUNTOS COLOMBIA&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.621</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-129">
          <a>Doc string</a>
      </div>
      <div id="msg-129" class="collapse collapsable-details">
        <pre>16:51:14.879 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2812
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;6567aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:866187,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:866187,&quot;rrn&quot;:866187,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;PUNTOS COLOMBIA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;PRIVADA&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;56412844****5757&quot;,&quot;accountType&quot;:&quot;NC&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:866187,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:866187},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:15.496 response time in milliseconds: 616
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 776
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:13 GMT
1 &lt; x-amzn-RequestId: 88e73e95-e05d-43bf-8a08-582925492f0c
1 &lt; x-amz-apigw-id: Srq80GiSoAMEepw=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15851-7d8628b33a7ff8a42ea72e9e
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 a095f5c394e0c42139106277f3743592.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: fiSDEVsGrb_Ann1r2CQwYPFbNHebwhk7E6kB58gOh8lgvzTnsI00OA==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;6567aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE86618786618720240205165100&quot;,&quot;approvalNum&quot;:&quot;866187&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;866187&quot;,&quot;rrn&quot;:&quot;866187&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;PUNTOS COLOMBIA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;PRIVADA&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;56412844****5757&quot;,&quot;accountType&quot;:&quot;NC&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;866187&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;866187&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE86618786618720240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165113&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.033</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-130">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-130" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-131">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-131" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.004</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-132">
          <a>Doc string</a>
      </div>
      <div id="msg-132" class="collapse collapsable-details">
        <pre>16:51:14.859 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.024</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.388</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-133">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-133" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-134">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-134" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;-&quot;</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;CREDITOPR&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;LEALTADPLUS&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.382</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-135">
          <a>Doc string</a>
      </div>
      <div id="msg-135" class="collapse collapsable-details">
        <pre>16:51:14.904 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2811
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;340836aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:127460,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:127460,&quot;rrn&quot;:127460,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;LEALTADPLUS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;CREDITOPR&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;61388645****6260&quot;,&quot;accountType&quot;:&quot;-&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:127460,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:127460},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:15.282 response time in milliseconds: 378
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 775
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:13 GMT
1 &lt; x-amzn-RequestId: e48b1f1e-8eae-4961-99fd-89786ae72d6d
1 &lt; x-amz-apigw-id: Srq8xEn6oAMEvQA=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15851-0137c6c255138a0c6dcec3ce
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 fa3530beeb0001c7dfc54ff5a427fa96.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: D-46TAxiD2W04Rz2mVNKRnAOnOn2U11WzTvq3tOg9T1JXOmRAt2wHw==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;340836aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE12746012746020240205165100&quot;,&quot;approvalNum&quot;:&quot;127460&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;127460&quot;,&quot;rrn&quot;:&quot;127460&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;LEALTADPLUS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;CREDITOPR&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;61388645****6260&quot;,&quot;accountType&quot;:&quot;-&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;127460&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;127460&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE12746012746020240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165113&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.039</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-136">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-136" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-137">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-137" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.017</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-138">
          <a>Doc string</a>
      </div>
      <div id="msg-138" class="collapse collapsable-details">
        <pre>16:51:14.869 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.016</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.615</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-139">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-139" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-140">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-140" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;AH&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;BONO CODEN&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;T. PRIVADA&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.611</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-141">
          <a>Doc string</a>
      </div>
      <div id="msg-141" class="collapse collapsable-details">
        <pre>16:51:14.916 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2812
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;305994aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:959463,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:959463,&quot;rrn&quot;:959463,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;T. PRIVADA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;BONO CODEN&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;22639548****9320&quot;,&quot;accountType&quot;:&quot;AH&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:959463,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:959463},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:15.525 response time in milliseconds: 609
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 776
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:13 GMT
1 &lt; x-amzn-RequestId: f12bceff-5a04-4d5f-8ac9-25d6d3bc4161
1 &lt; x-amz-apigw-id: Srq8zEhioAMEAig=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15851-345d7446698915ff5ad1f8c2
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 6a8bde05883e3a529e47f40f0d9e7aaa.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: 9jTZcdnJeTS-hrz3fU1l2QNx7fkKGKIBpCyju2A79o9XNamw0BajFQ==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;305994aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE95946395946320240205165100&quot;,&quot;approvalNum&quot;:&quot;959463&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;959463&quot;,&quot;rrn&quot;:&quot;959463&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;T. PRIVADA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;BONO CODEN&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;22639548****9320&quot;,&quot;accountType&quot;:&quot;AH&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;959463&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;959463&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE95946395946320240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165113&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.018</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-142">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-142" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-143">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-143" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.004</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-144">
          <a>Doc string</a>
      </div>
      <div id="msg-144" class="collapse collapsable-details">
        <pre>16:51:15.200 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.007</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.337</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-145">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-145" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-146">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-146" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;CC&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;BONOS&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;TOTAL BONOS&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.332</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-147">
          <a>Doc string</a>
      </div>
      <div id="msg-147" class="collapse collapsable-details">
        <pre>16:51:15.225 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2808
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;797418aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:654400,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:654400,&quot;rrn&quot;:654400,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;TOTAL BONOS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;BONOS&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;54566715****6554&quot;,&quot;accountType&quot;:&quot;CC&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:654400,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:654400},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:15.555 response time in milliseconds: 330
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 772
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:13 GMT
1 &lt; x-amzn-RequestId: f5df8a35-d952-45d4-8f86-5af5297364b1
1 &lt; x-amz-apigw-id: Srq80EumoAMEZUA=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15851-77dd1fd70caed6834790aa07
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 8b0b556682aca246cac2962455e370be.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: DAsS-Q_1ZTq8_cLdGl1tkFGq21c_iMRolk8gsTPcCB7ZZ9iv8GCpZA==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;797418aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE65440065440020240205165100&quot;,&quot;approvalNum&quot;:&quot;654400&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;654400&quot;,&quot;rrn&quot;:&quot;654400&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;TOTAL BONOS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;BONOS&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;54566715****6554&quot;,&quot;accountType&quot;:&quot;CC&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;654400&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;654400&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE65440065440020240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165113&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.049</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-148">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-148" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-149">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-149" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.033</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-150">
          <a>Doc string</a>
      </div>
      <div id="msg-150" class="collapse collapsable-details">
        <pre>16:51:15.288 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.009</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.619</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-151">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-151" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-152">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-152" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;CR&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;SODEXO&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;BONOS RECARGABLES&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.613</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-153">
          <a>Doc string</a>
      </div>
      <div id="msg-153" class="collapse collapsable-details">
        <pre>16:51:15.343 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2815
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;673079aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:331821,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:331821,&quot;rrn&quot;:331821,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;BONOS RECARGABLES&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;SODEXO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;79031451****1937&quot;,&quot;accountType&quot;:&quot;CR&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:331821,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:331821},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:15.954 response time in milliseconds: 610
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 779
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:14 GMT
1 &lt; x-amzn-RequestId: c0ba2d96-052e-440d-8ee7-d58767756d44
1 &lt; x-amz-apigw-id: Srq84EWcIAMEccQ=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15852-6c4bdbdd0fb34f6f5ac7d13c
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 d56500b57ee9fd16ecec33b0f5720c28.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: ME5gdHjjN5ojhZX2XHDKpbtJ7vbJvMT6l_Vlb8-mt2Up7X0Li8Y3uw==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;673079aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE33182133182120240205165100&quot;,&quot;approvalNum&quot;:&quot;331821&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;331821&quot;,&quot;rrn&quot;:&quot;331821&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;BONOS RECARGABLES&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;SODEXO&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;79031451****1937&quot;,&quot;accountType&quot;:&quot;CR&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;331821&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;331821&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE33182133182120240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165114&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.084</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-154">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-154" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-155">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-155" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.011</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-156">
          <a>Doc string</a>
      </div>
      <div id="msg-156" class="collapse collapsable-details">
        <pre>16:51:15.503 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.058</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.005</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.377</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-157">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-157" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-158">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-158" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;LT&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;BIG PASS&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;PCR&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.364</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-159">
          <a>Doc string</a>
      </div>
      <div id="msg-159" class="collapse collapsable-details">
        <pre>16:51:15.599 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2803
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;374340aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:672435,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:672435,&quot;rrn&quot;:672435,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;PCR&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;BIG PASS&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;35616165****1444&quot;,&quot;accountType&quot;:&quot;LT&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:672435,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:672435},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:15.959 response time in milliseconds: 360
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 767
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:14 GMT
1 &lt; x-amzn-RequestId: 4df30283-23b1-4b4b-bb7c-b36a716cad5c
1 &lt; x-amz-apigw-id: Srq84GlNIAMEepw=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15852-373c9e5b353e22080cc5a8f4
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 1b60cf6445dea0db327d48d27419e066.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: iZvJKNz6TP0qwQ6Il2uoC1KOoq_JySk4pXVBJjA4MGY9QOMi492M2w==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;374340aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE67243567243520240205165100&quot;,&quot;approvalNum&quot;:&quot;672435&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;672435&quot;,&quot;rrn&quot;:&quot;672435&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;PCR&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;BIG PASS&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;35616165****1444&quot;,&quot;accountType&quot;:&quot;LT&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;672435&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;672435&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE67243567243520240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165114&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.007</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.042</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-160">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-160" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-161">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-161" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.011</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-162">
          <a>Doc string</a>
      </div>
      <div id="msg-162" class="collapse collapsable-details">
        <pre>16:51:15.531 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.022</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.003</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.593</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-163">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-163" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-164">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-164" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;CM&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;BTERA.OTP&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;RECARGA EFECTIVO&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.583</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-165">
          <a>Doc string</a>
      </div>
      <div id="msg-165" class="collapse collapsable-details">
        <pre>16:51:15.596 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2817
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;826786aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:598702,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:598702,&quot;rrn&quot;:598702,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;RECARGA EFECTIVO&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;BTERA.OTP&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;92903762****1262&quot;,&quot;accountType&quot;:&quot;CM&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:598702,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:598702},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:16.177 response time in milliseconds: 581
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 781
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:14 GMT
1 &lt; x-amzn-RequestId: 2ffa5a90-7b98-4d57-9944-b59fccb47bc4
1 &lt; x-amz-apigw-id: Srq86Ha5oAMErSQ=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15852-14d366520b8b0ee70e2ad6f5
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 d56500b57ee9fd16ecec33b0f5720c28.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: cnALSHVasWnK7ZBuC02kRwQKQ0Sk7WXWdcW9xVE4qXLQp3hWrkj2Ww==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;826786aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE59870259870220240205165100&quot;,&quot;approvalNum&quot;:&quot;598702&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;598702&quot;,&quot;rrn&quot;:&quot;598702&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;RECARGA EFECTIVO&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;BTERA.OTP&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;92903762****1262&quot;,&quot;accountType&quot;:&quot;CM&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;598702&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;598702&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE59870259870220240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165114&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.068</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-166">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-166" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-167">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-167" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.041</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-168">
          <a>Doc string</a>
      </div>
      <div id="msg-168" class="collapse collapsable-details">
        <pre>16:51:15.564 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.005</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.013</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.370</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-169">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-169" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-170">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-170" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;CU&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;PTOSCOLMB&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;RECARGAS&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.364</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-171">
          <a>Doc string</a>
      </div>
      <div id="msg-171" class="collapse collapsable-details">
        <pre>16:51:15.641 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2809
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;949786aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:318125,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:318125,&quot;rrn&quot;:318125,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;RECARGAS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;PTOSCOLMB&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;59595039****1767&quot;,&quot;accountType&quot;:&quot;CU&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:318125,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:318125},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:16.003 response time in milliseconds: 361
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 773
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:14 GMT
1 &lt; x-amzn-RequestId: 952aa9f0-e0f3-4735-ae9b-ee9ddd9061b8
1 &lt; x-amz-apigw-id: Srq85E8SIAMEBeg=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15852-4c56b7b6558f8bb55269671b
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 ba321a618e817037ce8e0d09e9005b46.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: SI7H2C-JfgTYB3KNQePh7xX5WPov_-PRATjqI1gUg2PthzGqiRrjlg==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;949786aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE31812531812520240205165100&quot;,&quot;approvalNum&quot;:&quot;318125&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;318125&quot;,&quot;rrn&quot;:&quot;318125&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;RECARGAS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;PTOSCOLMB&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;59595039****1767&quot;,&quot;accountType&quot;:&quot;CU&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;318125&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;318125&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE31812531812520240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165114&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.049</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-172">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-172" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-173">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-173" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.007</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-174">
          <a>Doc string</a>
      </div>
      <div id="msg-174" class="collapse collapsable-details">
        <pre>16:51:15.963 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.004</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.011</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.016</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.722</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-175">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-175" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-176">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-176" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;BE&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;LIFEMILES&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;EFECTIVO&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.713</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-177">
          <a>Doc string</a>
      </div>
      <div id="msg-177" class="collapse collapsable-details">
        <pre>16:51:16.029 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2808
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;41095aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:791742,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:791742,&quot;rrn&quot;:791742,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;EFECTIVO&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;LIFEMILES&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;20078900****8138&quot;,&quot;accountType&quot;:&quot;BE&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:791742,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:791742},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:16.736 response time in milliseconds: 707
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 772
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:14 GMT
1 &lt; x-amzn-RequestId: 8479d895-59d4-47c8-a72a-09a6463ca509
1 &lt; x-amz-apigw-id: Srq9AFBIIAMEiYQ=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15852-54c2bd8a1d31dda00956db3d
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 6a8bde05883e3a529e47f40f0d9e7aaa.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: rOhqQzXqfnObe6dkGxgJdVFZiNJd_tjzKrL6_nNBtFBcHH-zWM71nw==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;41095aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE79174279174220240205165100&quot;,&quot;approvalNum&quot;:&quot;791742&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;791742&quot;,&quot;rrn&quot;:&quot;791742&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;EFECTIVO&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;LIFEMILES&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;20078900****8138&quot;,&quot;accountType&quot;:&quot;BE&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;791742&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;791742&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE79174279174220240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165114&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.031</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-178">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-178" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-179">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-179" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.006</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-180">
          <a>Doc string</a>
      </div>
      <div id="msg-180" class="collapse collapsable-details">
        <pre>16:51:15.975 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.014</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.506</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-181">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-181" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-182">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-182" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;RT&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;MASTER DEBI&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;IMPUESTOS&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.500</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-183">
          <a>Doc string</a>
      </div>
      <div id="msg-183" class="collapse collapsable-details">
        <pre>16:51:16.024 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2812
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;225062aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:547780,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:547780,&quot;rrn&quot;:547780,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;IMPUESTOS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MASTER DEBI&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;74317367****3877&quot;,&quot;accountType&quot;:&quot;RT&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:547780,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:547780},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:16.511 response time in milliseconds: 487
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 776
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:14 GMT
1 &lt; x-amzn-RequestId: eed784fb-87cf-4d45-add7-910dc4b97f3c
1 &lt; x-amz-apigw-id: Srq8-HjHoAMENZg=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15852-3d689f92333812ec70417b34
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 a1c9d85482f328fefd09e9554d8dba7a.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: bX2dNQkaXksh3xzoogD7jj0g13zPCBSdO8fBcCObSdbz_2NHDVGodQ==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;225062aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE54778054778020240205165100&quot;,&quot;approvalNum&quot;:&quot;547780&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;547780&quot;,&quot;rrn&quot;:&quot;547780&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;IMPUESTOS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MASTER DEBI&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;74317367****3877&quot;,&quot;accountType&quot;:&quot;RT&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;547780&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;547780&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE54778054778020240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165114&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.042</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-184">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-184" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-185">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-185" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.029</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-186">
          <a>Doc string</a>
      </div>
      <div id="msg-186" class="collapse collapsable-details">
        <pre>16:51:16.009 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.007</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.470</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-187">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-187" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-188">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-188" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;RG&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;MASTER&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;WIZEO&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.467</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-189">
          <a>Doc string</a>
      </div>
      <div id="msg-189" class="collapse collapsable-details">
        <pre>16:51:16.059 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2803
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;294819aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:415867,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:415867,&quot;rrn&quot;:415867,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;WIZEO&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MASTER&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;11238554****5547&quot;,&quot;accountType&quot;:&quot;RG&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:415867,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:415867},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:16.523 response time in milliseconds: 464
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 767
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:14 GMT
1 &lt; x-amzn-RequestId: 9e612921-23d3-4fc3-b9ae-9db0e809b267
1 &lt; x-amz-apigw-id: Srq8-G8EIAMEnpg=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15852-017afc3b1b6a277d51f88fee
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 696c8415a4298d6cdc615fcf825987ee.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: CXJwUeumLa0Yt2jnXDmOZ3Pc98Qtkpvz94yvpYbecOSOrczr3Pohmw==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;294819aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE41586741586720240205165100&quot;,&quot;approvalNum&quot;:&quot;415867&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;415867&quot;,&quot;rrn&quot;:&quot;415867&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;WIZEO&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MASTER&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;11238554****5547&quot;,&quot;accountType&quot;:&quot;RG&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;415867&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;415867&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE41586741586720240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165114&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.018</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-190">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-190" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-191">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-191" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.005</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-192">
          <a>Doc string</a>
      </div>
      <div id="msg-192" class="collapse collapsable-details">
        <pre>16:51:16.188 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.002</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.005</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.362</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-193">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-193" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-194">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-194" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;DS&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;MASTERD&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;OPS&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.359</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-195">
          <a>Doc string</a>
      </div>
      <div id="msg-195" class="collapse collapsable-details">
        <pre>16:51:16.215 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2802
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;710517aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:507080,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:507080,&quot;rrn&quot;:507080,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;OPS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MASTERD&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;31355015****4940&quot;,&quot;accountType&quot;:&quot;DS&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:507080,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:507080},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:16.570 response time in milliseconds: 355
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 766
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:14 GMT
1 &lt; x-amzn-RequestId: f898ccfd-1b33-46d1-85a3-96810ecfff6a
1 &lt; x-amz-apigw-id: Srq8-GLooAMEYNg=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15852-0a47ebde5f386a895220b590
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 672a274f5830cff711168a1debfae76c.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: uxYovA1xNzkcegf5sq3v7wu1dv3Q02619PQT3sAoJYQz6qfSWBKcbw==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;710517aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE50708050708020240205165100&quot;,&quot;approvalNum&quot;:&quot;507080&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;507080&quot;,&quot;rrn&quot;:&quot;507080&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;OPS&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MASTERD&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;31355015****4940&quot;,&quot;accountType&quot;:&quot;DS&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;507080&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;507080&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE50708050708020240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165114&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.020</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-196">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-196" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-197">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-197" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.006</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-198">
          <a>Doc string</a>
      </div>
      <div id="msg-198" class="collapse collapsable-details">
        <pre>16:51:16.523 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.008</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.634</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-199">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-199" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-200">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-200" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;BC&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;MASTER DEB&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;QR&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.628</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-201">
          <a>Doc string</a>
      </div>
      <div id="msg-201" class="collapse collapsable-details">
        <pre>16:51:16.552 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2804
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;880727aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:414524,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:414524,&quot;rrn&quot;:414524,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;QR&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MASTER DEB&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;37619201****6539&quot;,&quot;accountType&quot;:&quot;BC&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:414524,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:414524},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:17.179 response time in milliseconds: 627
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 768
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:15 GMT
1 &lt; x-amzn-RequestId: a5e48718-bfa5-4970-9b5c-384ebba7ca70
1 &lt; x-amz-apigw-id: Srq9EEGEoAMEDqQ=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15853-4779da9f490f7ba1596f3ef1
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 c919c9f17e93c83384b6ac4ae98b8bba.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: 7y7mXNiPRu2O1qyfBAdTFij-t3wS8TNah_20W-nr4QRKohTRh7jNbg==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;880727aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE41452441452420240205165100&quot;,&quot;approvalNum&quot;:&quot;414524&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;414524&quot;,&quot;rrn&quot;:&quot;414524&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;QR&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MASTER DEB&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;37619201****6539&quot;,&quot;accountType&quot;:&quot;BC&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;414524&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;414524&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE41452441452420240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165115&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.163</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-202">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-202" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-203">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-203" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.002</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-204">
          <a>Doc string</a>
      </div>
      <div id="msg-204" class="collapse collapsable-details">
        <pre>16:51:16.529 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.154</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.494</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-205">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-205" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-206">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-206" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;BD&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;MASTER DEBIT&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;LIFEMILES&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.490</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-207">
          <a>Doc string</a>
      </div>
      <div id="msg-207" class="collapse collapsable-details">
        <pre>16:51:16.699 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2813
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;794744aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:410202,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:410202,&quot;rrn&quot;:410202,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;LIFEMILES&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MASTER DEBIT&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;48931796****3595&quot;,&quot;accountType&quot;:&quot;BD&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:410202,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:410202},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:17.187 response time in milliseconds: 488
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 777
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:15 GMT
1 &lt; x-amzn-RequestId: 2c9e739b-d3f3-481d-8b5b-c3294372760f
1 &lt; x-amz-apigw-id: Srq9EEWoIAMENOA=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15853-1a3fe9e079893b1c0f6ee42d
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 1b60cf6445dea0db327d48d27419e066.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: chFquIEM8wwZ_rIZRc90EbuXc-SDklB6MkkKVIyI9L3dCIAW4Zwq-Q==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;794744aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE41020241020220240205165100&quot;,&quot;approvalNum&quot;:&quot;410202&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;410202&quot;,&quot;rrn&quot;:&quot;410202&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;LIFEMILES&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;MASTER DEBIT&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;48931796****3595&quot;,&quot;accountType&quot;:&quot;BD&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;410202&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;410202&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE41020241020220240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165115&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.019</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-208">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-208" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-209">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-209" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.005</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-210">
          <a>Doc string</a>
      </div>
      <div id="msg-210" class="collapse collapsable-details">
        <pre>16:51:16.576 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.008</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.579</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-211">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-211" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-212">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-212" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;SP&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;VISA&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;PSP&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.574</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-213">
          <a>Doc string</a>
      </div>
      <div id="msg-213" class="collapse collapsable-details">
        <pre>16:51:16.603 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2799
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;982525aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:746417,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:746417,&quot;rrn&quot;:746417,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;PSP&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;VISA&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;36548325****9649&quot;,&quot;accountType&quot;:&quot;SP&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:746417,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:746417},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:17.176 response time in milliseconds: 573
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 763
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:15 GMT
1 &lt; x-amzn-RequestId: 2ddb872b-0ffe-4af7-909f-630122398151
1 &lt; x-amz-apigw-id: Srq9EG-sIAMEZjQ=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15853-4e465a0b20ba0bc37a62b276
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 672a274f5830cff711168a1debfae76c.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: Yo1ctyCA2nWGKMgaejpHTIVvulCgwQfIga5pIP-Wpib3hZ7b0wcxQA==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;982525aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE74641774641720240205165100&quot;,&quot;approvalNum&quot;:&quot;746417&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;746417&quot;,&quot;rrn&quot;:&quot;746417&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;PSP&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;VISA&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;36548325****9649&quot;,&quot;accountType&quot;:&quot;SP&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;746417&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;746417&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE74641774641720240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165115&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.113</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-214">

<div class="brief passed">
  <span class="keyword indention">Background</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-214" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-215">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-215" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def bodyTrx = read('classpath:payloads/BodyTrxAdquirencia.json')</span>

  <span class="lead-duration duration">0.094</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-216">
          <a>Doc string</a>
      </div>
      <div id="msg-216" class="collapse collapsable-details">
        <pre>16:51:16.743 karate.env system property was: dev-adqui 
</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def responseTimeRange = { min: 10, max: 15000 }</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dataGenerator = Java.type('helper.DataGenerator')</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def NumReceipt = dataGenerator.getRandomNumReceipt()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.receipt = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.fullAmount = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].payment.taxBase = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].paymentMethod.card = dataGenerator.getRandomValueCard()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].commerce.atmId = dataGenerator.getRandomValueCajero()</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.rrn = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.approvalNum = NumReceipt</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def dateTimes = karate.call('classpath:helper/dateTime.js')</span>

  <span class="lead-duration duration">0.011</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.dateTime = dateTimes.date</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.hour = dateTimes.hora</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">set bodyTrx.payload[0].transaction.date = dateTimes.dia</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>


<div class="element">


<div class="tags indention">
</div>


  <span class="lead-duration duration">0.613</span>


  <span data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#element-217">

<div class="brief passed">
  <span class="keyword indention">Scenario Outline</span>
  <span class="name">peticion Post que obtiene el token de cognito y luego lo pasa al header de la peticion de aprobacion con firma</span>


     <i class="chevron fa fa-fw"></i>
</div>

  </span>
  <div class="description indention"></div>

  <div id="element-217" class="collapse collapsable-details ">





<div class="steps inner-level">
  <div data-toggle="collapse" class=" collapsed  collapsable-control" data-target="#steps-218">

<div class="brief passed">
  <span class="keyword indention">Steps</span>
  <span class="name"></span>


     <i class="chevron fa fa-fw"></i>
</div>

  </div>

  <div id="steps-218" class="inner-level collapse collapsable-details ">
      <div class="step">


<div class="brief step-name-* passed">
  <span class="keyword indention">*</span>
  <span class="name">def sleep = function(pause){ java.lang.Thread.sleep(pause)}</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-Given passed">
  <span class="keyword indention">Given</span>
  <span class="name">url url</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">path pathUrl</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">header x-api-key = apiKey</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.commerceId = '87654323456'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].commerce.terminalId = 'BSSDF8WE'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.status = '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.accountType = &quot;00&quot;</span>

  <span class="lead-duration duration">0.006</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].paymentMethod.franchise = &quot;DINERS&quot;</span>

  <span class="lead-duration duration">0.001</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx.payload[0].transaction.transactionType = &quot;NODATA&quot;</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">request bodyTrx</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-When passed">
  <span class="keyword indention">When</span>
  <span class="name">method post</span>

  <span class="lead-duration duration">0.601</span>

</div>









  <div class="inner-level">
    <div class="docstring indention">
      <div data-toggle="collapse" class="collapsable-control" data-target="#msg-219">
          <a>Doc string</a>
      </div>
      <div id="msg-219" class="collapse collapsable-details">
        <pre>16:51:16.872 request:
1 &gt; POST https://api.redebanvd.net/transactional/api/vouchers/transactions
1 &gt; x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g
1 &gt; Authorization: Bearer eyJraWQiOiJEK1lFdFlkdDdPeDUrU3prUWhoNDI0RnpId3dhQ3hNYlwvUng4YWUxTnZRYz0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzZmRuN2N2a2szbjNtbWJtM3ZpZG1yNnZjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA3MTY5ODY4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV85dWM0ZGlWeloiLCJleHAiOjE3MDcxNzE2NjgsImlhdCI6MTcwNzE2OTg2OCwidmVyc2lvbiI6MiwianRpIjoiZTg0MzFlYTEtM2QxMC00NWU2LThiYjUtMWFjMWVmY2Y3ZDk5IiwiY2xpZW50X2lkIjoiM2ZkbjdjdmtrM24zbW1ibTN2aWRtcjZ2Y2UifQ.RRzY4eVycvuxYgV33XDVK-v9skGYQZf1q3ytPXGoKFaVQvtq7wZFkHEFIyc1s5YqG97nZ5fTRumZDsdIN3suGczJ3WCV0Vd-Pf_muwpdo9vFXjvBbEbrMabpfcppen9sk48amctMtX7XSceJnWV6qdoUpASjNr4qArXQEX31Za6v9k9MGaEfdLN-yDilTyJcwSy63ogbolTTzl1yygeiwEQk8xBmobcrPJztpkGLZWoi6rAjyuf8hK_hf-iS4pTxVK5N6lUoCiknjMczqKVxruvw9KInY9-_-A-CElGstxBX4NpKGjLnyDMXPpRPeTOrbu3Xr2CejeZoF-gg7-Gw4A
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 2804
1 &gt; Host: api.redebanvd.net
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.5)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;payload&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;435541aBcD&quot;},&quot;transaction&quot;:{&quot;approvalNum&quot;:561433,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;20240205&quot;,&quot;hour&quot;:&quot;1651&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:561433,&quot;rrn&quot;:561433,&quot;dateTime&quot;:&quot;20240205165100&quot;,&quot;transactionType&quot;:&quot;NODATA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;DINERS&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;50666758****1425&quot;,&quot;accountType&quot;:&quot;00&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:561433,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:561433},&quot;script&quot;:&quot;[0X0A][0X1C][0X2C][0X3B]p&amp;r%u\/e@b*ap&amp;r%u\/e@b*a[0X0A][0X1C][0X2C][0X3B]CR 20 33 - 15 [0X0A][0X1A][0X2A][0X3A]C.UNICO:112121212121 [0X1B]TER:LEAL0041[0X0A][0X1A]MASTERCARD[0X1C]EXP:2710 CUO:2[0X1B]CR[0X0A][0X1A]528209**5461[0X1C]RECIBO:000034[0X1B]RRN:000955[0X0A][0X1C]ARQC:7110DDB67A6B1AB0[0X0A][0X1C]AID:A0000000041010[0X0A][0X1C]AP LABEL:Mastercard[0X0A] [0X0A][0X1A]VENTA[0X1B]APRO:HOME01[0X0A][0X1A]COMPRA NETA:[0X1B]$ 46.463[0X0A][0X1A]IVA:[0X1B]$ 330[0X0A][0X1A]INC:[0X1B]$ 440[0X0A][0X1A]PROPINA:[0X1B]$ 23.323[0X0A][0X3C][0X1A]TOTAL:[0X1B]$ 438.786[0X0A]&quot;,&quot;signature&quot;:{&quot;signatureFlag&quot;:true,&quot;signature&quot;:&quot;424D3E0F(12)3E(6)28(6)2C01(4)6(8)10001(56)B1{6}01{75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){41}E0{32}(5){40}8000{31}(5){39}000E01{30}(5){37}C003FFE01{29}(5){36}E007{4}C01{28}(5){36}C1{7}C03{27}(5){36}8{9}C07{26}(5){36}9{10}80{26}(5){36}9{11}01{25}(5){36}9{11}E03{24}(5){36}1{12}C07{23}(5){36}3{13}80{23}(5){35}E3{14}01{22}(5){35}E7{14}E03{21}(5){35}C7{15}C03{20}(5){35}C{17}807{19}(5){35}C{18}80{19}(5){35}C{19}00{18}(5){35}C{19}E03{17}(5){35}8{20}E3{17}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{39}(5){35}9{17}3{21}(5){35}9{17}3{21}(5){35}9{16}E3{21}(5){35}8{16}E7{21}(5){35}C{16}C7{21}(5){35}C{16}8{22}(5){35}C{16}9{22}(5){35}C{16}1{22}(5){35}C{16}3{22}(5){35}C{15}E3{22}(5){35}C{15}E7{22}(5){35}C7{14}C7{22}(5){35}E7FFF03{9}C{23}(5){35}E7F0003{9}8{23}(5){34}E(5)7{10}1{23}(5){30}C(7)7{11}E3{23}(5){27}E(7)F3{13}E7{23}(5){26}80001{5}3{13}C7{23}(5){25}000{8}3{13}C{24}(5){10}9{12}E003{9}1{13}C{24}(5){10}9{11}8007{10}9{13}8{24}(5){10}8{10}000{12}9{12}E1{24}(5){10}C{8}E003{13}9{12}C3{24}(5){10}C7{6}8007{14}8{12}8{25}(5){10}E3{5}000{16}C{12}1{25}(5){11}3FFFE003{17}C7{10}C3{25}(5){11}1FF8007{18}E7{10}87{25}(5){11}9F000{20}E3{9}E1{26}(5){11}8003{22}3{9}C3{26}(5){11}C07{23}1{9}0{27}(5){11}C{25}9{8}C1{27}(5){37}8{8}87{27}(5){37}C{7}E1{28}(5){37}C7{6}03{28}(5){37}E3{5}00{29}(5){38}3FFFC007{29}(5){38}03F8007{30}(5){38}80001{32}(5){39}803{33}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5){75}(5)&quot;},&quot;notification&quot;:{&quot;notificationFlag&quot;:true,&quot;cellphone&quot;:&quot;3177928280&quot;,&quot;notificationType&quot;:1}}]}

16:51:17.470 response time in milliseconds: 598
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 768
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 05 Feb 2024 21:51:15 GMT
1 &lt; x-amzn-RequestId: 048f02cd-19ea-45d1-a6f3-c605548fd7de
1 &lt; x-amz-apigw-id: Srq9HHG8oAMEd6w=
1 &lt; X-Amzn-Trace-Id: Root=1-65c15853-3261003f3fba3aa64ab03a4e
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 8e549689daceb1adfb27c798bb377b52.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: LIM50-P1
1 &lt; X-Amz-Cf-Id: HTPoqSwGEqj_HkSA6wf9l9czx-w4k-YIL7cO8glngnTALYR6OiVeKw==
{&quot;resultObject&quot;:[{&quot;commerce&quot;:{&quot;commerceId&quot;:&quot;87654323456&quot;,&quot;terminalId&quot;:&quot;BSSDF8WE&quot;,&quot;techVersion&quot;:&quot;V-T35T&quot;,&quot;atmId&quot;:&quot;435541aBcD&quot;},&quot;transaction&quot;:{&quot;voucherId&quot;:&quot;BSSDF8WE56143356143320240205165100&quot;,&quot;approvalNum&quot;:&quot;561433&quot;,&quot;responseCode&quot;:&quot;12&quot;,&quot;status&quot;:&quot;00&quot;,&quot;date&quot;:&quot;2024-02-05&quot;,&quot;hour&quot;:&quot;16:51:00&quot;,&quot;authMode&quot;:&quot;01&quot;,&quot;inMode&quot;:&quot;03X&quot;,&quot;receipt&quot;:&quot;561433&quot;,&quot;rrn&quot;:&quot;561433&quot;,&quot;dateTime&quot;:&quot;2024-02-05T16:51:00&quot;,&quot;transactionType&quot;:&quot;NODATA&quot;},&quot;paymentMethod&quot;:{&quot;franchise&quot;:&quot;DINERS&quot;,&quot;millerNum&quot;:&quot;54848948948&quot;,&quot;card&quot;:&quot;50666758****1425&quot;,&quot;accountType&quot;:&quot;00&quot;},&quot;payment&quot;:{&quot;taxBase&quot;:&quot;561433&quot;,&quot;incAmount&quot;:&quot;0&quot;,&quot;ivaAmount&quot;:&quot;0&quot;,&quot;tipAmount&quot;:&quot;0&quot;,&quot;fullAmount&quot;:&quot;561433&quot;}}],&quot;status&quot;:[{&quot;transactionId&quot;:&quot;BSSDF8WE56143356143320240205165100&quot;,&quot;statusCode&quot;:&quot;00&quot;,&quot;statusDescription&quot;:&quot;PROCESSED&quot;,&quot;dateTime&quot;:&quot;20240205165115&quot;}]}

</pre>
      </div>
    </div>
  </div>







      </div>
      <div class="step">


<div class="brief step-name-Then passed">
  <span class="keyword indention">Then</span>
  <span class="name">status 200</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.status[0].statusDescription == 'PROCESSED'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">match response.resultObject[0].transaction.status == '00'</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
      <div class="step">


<div class="brief step-name-And passed">
  <span class="keyword indention">And</span>
  <span class="name">assert responseTime &gt;= responseTimeRange.min &amp;&amp; responseTime &lt;= responseTimeRange.max</span>

  <span class="lead-duration duration">0.000</span>

</div>
















      </div>
  </div>
</div>





  </div>
</div>

        </div>

      </div>
    </div>
  </div>
</div>


<div class="container-fluid">
  <div class="row">
    <div class="col-md-1 col-md-offset-10">
      <i class="fa fa-chevron-circle-down fa-2x collapsable-control"
        onClick="javascript:$('#report .collapsable-details').collapse('show')"></i>
      <i class="fa fa-chevron-circle-up fa-2x collapsable-control"
        onClick="javascript:$('#report .collapsable-details').collapse('hide')"></i>
    </div>
  </div>
</div>

<br/>

<nav class="navbar navbar-default" id="footer">
  <div class="container-fluid">
    <p class="navbar-text navbar-right">
        <small>generate Cucumber HTML reports via:&nbsp;</small>
        <a class="navbar-link" href="https://github.com/jenkinsci/cucumber-reports-plugin">Jenkins Plugin</a> |
        <a class="navbar-link" href="https://github.com/damianszczepanik/cucumber-reporting">Standalone</a> |
        <a class="navbar-link" href="https://github.com/damianszczepanik/cucumber-sandwich">Sandwich</a> |
        <a class="navbar-link" href="https://github.com/damianszczepanik/maven-cucumber-reporting">Maven</a>
        &nbsp;&nbsp;
    </p>
  </div>
</nav>

</body>
</html>
