[{"line":1,"elements":[{"line":3,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"def path = '\/transactional\/api\/vouchers\/closures'","result":{"duration":736700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":4,"doc_string":{"content_type":"","value":"17:27:22.081 << lock released, cached callSingle: classpath:helper\/CrearToken.feature\n","line":4}},{"name":"helper\/CrearToken.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"","line":4,"doc_string":{"content_type":"","value":"{\n  \"pathUrl\": \"\/transactional\/api\/vouchers\/transactions\",\n  \"apiToken\": \"https:\/\/voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com\/oauth2\/token\",\n  \"url\": \"https:\/\/apicorr.redebanvd.net\",\n  \"apiKey\": \"tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\",\n  \"tokenAuthorization\": \"Basic NnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGw6MW5uNjVnOXA1bHY5cnZubHYwdTljNm52cnMzM2hramluNWVrNDNyNTJyYmcwaDhxdmhjMQ==\"\n}\n","line":4}},{"name":"url apiToken","result":{"duration":1356600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":4,"doc_string":{"content_type":"","value":"17:27:20.535 karate.env system property was: dev-corr \n17:27:20.547 >> lock acquired, begin callSingle: classpath:helper\/CrearToken.feature\n","line":4}},{"name":"header Content-Type = 'application\/x-www-form-urlencoded'","result":{"duration":1329500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":5},{"name":"header Authorization = tokenAuthorization","result":{"duration":374300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":6},{"name":"request 'grant_type=client_credentials&Scope=consumers%2Ffabrica'","result":{"duration":1045400,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":7},{"name":"method post","result":{"duration":1451781300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":8,"doc_string":{"content_type":"","value":"17:27:21.054 request:\n1 > POST https:\/\/voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com\/oauth2\/token\n1 > Content-Type: application\/x-www-form-urlencoded; charset=UTF-8\n1 > Authorization: Basic NnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGw6MW5uNjVnOXA1bHY5cnZubHYwdTljNm52cnMzM2hramluNWVrNDNyNTJyYmcwaDhxdmhjMQ==\n1 > Content-Length: 55\n1 > Host: voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n1 > Accept-Encoding: gzip,deflate\ngrant_type=client_credentials&Scope=consumers%2Ffabrica\n\n17:27:22.048 response time in milliseconds: 987\n1 < 200\n1 < Date: Fri, 05 Jan 2024 22:27:21 GMT\n1 < Content-Type: application\/json;charset=UTF-8\n1 < Transfer-Encoding: chunked\n1 < Connection: keep-alive\n1 < Content-Security-Policy-Report-Only: script-src https:\/\/d3oia8etllorh5.cloudfront.net https:\/\/voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com; style-src https:\/\/d3oia8etllorh5.cloudfront.net https:\/\/voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com; img-src https:\/\/d3oia8etllorh5.cloudfront.net https:\/\/voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com; report-uri https:\/\/voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com\/cspreport\n1 < x-amz-cognito-request-id: fb37ba79-b49f-4302-977a-819e79d57927\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Strict-Transport-Security: max-age=31536000 ; includeSubDomains\n1 < X-Frame-Options: DENY\n1 < Server: Server\n1 < Set-Cookie: XSRF-TOKEN=36959cff-fdca-4f7c-a295-f7e4e9ec6dc0; Domain=voucherdigitalclouddevcorr.auth.us-east-1.amazoncognito.com; Secure\n{\"access_token\":\"eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA0NDkzNjQxLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE3MDQ0OTU0NDEsImlhdCI6MTcwNDQ5MzY0MSwidmVyc2lvbiI6MiwianRpIjoiYzBiNTFjOWUtNDI5MC00OWYwLWI5NWYtZGMyYWRmMjEyNTdjIiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.ATDTgc_XrFvJJdCMyH6A5oUePYhPj8FPUbJg1g4Vg-BlTsND61HiXZ9kvdziduq4NBX7i6U4h1HFKlsvIQj_GrbSzdAvehzjYmgAo_dz0P4jVE9X-PfvzCo94zX3Uz3AgVhyAXS24WSp-AI1A3woqe1OqbgFMxWI14nYzkYk6bBFwDTCeYayXIPJPhwfsL7QWWuy9PhQg2eLMDAwnxJ2R9KWnlCKKfGlLtaDkYZJXos1eS0xGM_dgDwrezOmqzKXP5rEsCblnwXWcM50ylvYqRENUPL9g9C4a72EuPenLIrgtEKCkdEbkXEzKPdiijm6IFJp9CZ5Uk5rWog23kukLA\",\"expires_in\":1800,\"token_type\":\"Bearer\"}\n\n","line":8}},{"name":"status 200","result":{"duration":26500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":9},{"name":"def access_token = response.access_token","result":{"duration":6718300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":10},{"name":"def bodyTrx = read('classpath:payloads\/BodyCierres.json')","result":{"duration":37567900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":5},{"name":"def responseTimeRange = { min: 10, max: 15000 }","result":{"duration":504000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":6},{"name":"def dateTimes = karate.call('classpath:helper\/dateTime.js')","result":{"duration":387425100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":7},{"name":"set bodyTrx.payload[0].transaction.dateTime = dateTimes.date","result":{"duration":3088700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":8},{"name":"set bodyTrx.payload[0].transaction.hour = dateTimes.hora","result":{"duration":1390100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9},{"name":"set bodyTrx.payload[0].transaction.date = dateTimes.dia","result":{"duration":1274100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10}]},{"line":32,"name":"peticion Post que envia el cierre Correcto de una determinada terminal o datafono","description":"","id":"peticion-post-que-envia-el-cierre-correcto-de-una-determinada-terminal-o-datafono","type":"scenario","keyword":"Scenario Outline","steps":[{"name":"url url","result":{"duration":140500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":13},{"name":"path path","result":{"duration":471400,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":14},{"name":"header x-api-key = apiKey","result":{"duration":172500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":15},{"name":"request bodyTrx.payload[0].commerce.financialCode = '0023'","result":{"duration":2445200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":16},{"name":"request bodyTrx.payload[0].commerce.address = 'PRUEBAS CIERRES MIXTO CORR 0023'","result":{"duration":728200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":17},{"name":"request bodyTrx.payload[0].commerce.correspondentId = '2012202301'","result":{"duration":624900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":18},{"name":"request bodyTrx.payload[0].commerce.terminalId = 'LEAL2022'","result":{"duration":648900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":19},{"name":"request bodyTrx","result":{"duration":132100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":20},{"name":"method post","result":{"duration":442859500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":21,"doc_string":{"content_type":"","value":"17:27:22.529 request:\n2 > POST https:\/\/apicorr.redebanvd.net\/transactional\/api\/vouchers\/closures\n2 > x-api-key: tZtH1xkzxt8au5Vae8at14kL4MwEZ2su59imax5g\n2 > Authorization: Bearer eyJraWQiOiJpSWxIZlwvdXU2U2JwMGVLSXRIRVJBRFFhVURLQit1RDVpcUVMVFhRbW92OD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2dGJza2M0ZWx1aXFkcHVwc2ptcTRyOThsbCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiY29uc3VtZXJzXC9mYWJyaWNhIiwiYXV0aF90aW1lIjoxNzA0NDkzNjQxLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9wOVR4ZThJNlUiLCJleHAiOjE3MDQ0OTU0NDEsImlhdCI6MTcwNDQ5MzY0MSwidmVyc2lvbiI6MiwianRpIjoiYzBiNTFjOWUtNDI5MC00OWYwLWI5NWYtZGMyYWRmMjEyNTdjIiwiY2xpZW50X2lkIjoiNnRic2tjNGVsdWlxZHB1cHNqbXE0cjk4bGwifQ.ATDTgc_XrFvJJdCMyH6A5oUePYhPj8FPUbJg1g4Vg-BlTsND61HiXZ9kvdziduq4NBX7i6U4h1HFKlsvIQj_GrbSzdAvehzjYmgAo_dz0P4jVE9X-PfvzCo94zX3Uz3AgVhyAXS24WSp-AI1A3woqe1OqbgFMxWI14nYzkYk6bBFwDTCeYayXIPJPhwfsL7QWWuy9PhQg2eLMDAwnxJ2R9KWnlCKKfGlLtaDkYZJXos1eS0xGM_dgDwrezOmqzKXP5rEsCblnwXWcM50ylvYqRENUPL9g9C4a72EuPenLIrgtEKCkdEbkXEzKPdiijm6IFJp9CZ5Uk5rWog23kukLA\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 295\n2 > Host: apicorr.redebanvd.net\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.5)\n2 > Accept-Encoding: gzip,deflate\n{\"payload\":[{\"commerce\":{\"address\":\"PRUEBAS CIERRES MIXTO CORR 0023\",\"name\":\"testTT WWWWW TTTTTTTT FFFFFFF\",\"terminalId\":\"LEAL2022\",\"correspondentId\":\"2012202301\",\"financialCode\":\"0023\"},\"transaction\":{\"date\":\"20240105\",\"dateTime\":\"20240105172700\",\"hour\":\"1727\",\"techVersion\":\"V42343223T35T\"}}]}\n\n17:27:22.968 response time in milliseconds: 437\n2 < 200\n2 < Content-Type: application\/json\n2 < Content-Length: 506\n2 < Connection: keep-alive\n2 < Date: Fri, 05 Jan 2024 22:27:22 GMT\n2 < x-amzn-RequestId: 1a9a9f93-6f9d-4d7c-9d8a-c6cded03af97\n2 < Access-Control-Allow-Origin: *\n2 < x-amz-apigw-id: RFlLvHiuIAMEL9w=\n2 < X-Amzn-Trace-Id: Root=1-6598824a-46ac383d51713b3a5e6f084d\n2 < X-Cache: Miss from cloudfront\n2 < Via: 1.1 eea31a927983f0bce2a203db674ff998.cloudfront.net (CloudFront)\n2 < X-Amz-Cf-Pop: BOG50-C1\n2 < X-Amz-Cf-Id: dTMFDDXJgHMQGz-oejuTX9Mh0EDSU1oxDCW3Nfk9S-bJIldaIbtlfg==\n{\"resultObject\":[{\"commerce\":{\"correspondentId\":\"2012202301\",\"address\":\"PRUEBAS CIERRES MIXTO CORR 0023\",\"name\":\"testTT WWWWW TTTTTTTT FFFFFFF\",\"financialCode\":\"0023\",\"terminalId\":\"LEAL2022\"},\"transaction\":{\"closeId\":\"0774afba-e1e9-41fe-9385-b2dff10d8d1a\",\"date\":\"2024-01-05\",\"hour\":\"17:27:00\",\"dateTime\":\"2024-01-05T17:27:00\",\"techVersion\":\"V42343223T35T\"}}],\"status\":[{\"transactionId\":\"0774afba-e1e9-41fe-9385-b2dff10d8d1a\",\"statusCode\":\"00\",\"statusDescription\":\"PROCESSED\",\"dateTime\":\"20240105172722\"}]}\n\n","line":21}},{"name":"status 200","result":{"duration":12300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":22},{"name":"assert responseTime >= responseTimeRange.min && responseTime <= responseTimeRange.max","result":{"duration":4371100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":23},{"name":"match response.status[0].statusDescription == 'PROCESSED'","result":{"duration":9005600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":24},{"name":"match response.status[0].statusCode == '00'","result":{"duration":1412400,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":25}],"tags":[]}],"name":"Cierres\/Cierre_VoucherQA.feature","description":"Ejecutar Endpoint para realizar el cierre Correcto de una terminal o Datafono","id":"ejecutar-endpoint-para-realizar-el-cierre-correcto-de-una-terminal-o-datafono","keyword":"Feature","uri":"Cierres\/Cierre_VoucherQA.feature"}]